<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Sending Faxes - HylaFAX Enterprise Guide</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">HylaFAX Enterprise Guide</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../quickstart/" class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Quickstart Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../quickstart/appliance-installation/" class="dropdown-item">Getting Started</a>
</li>
                                    
<li>
    <a href="../../quickstart/installing-the-iso/" class="dropdown-item">Installing the iso</a>
</li>
                                    
<li>
    <a href="../../quickstart/activating-the-license/" class="dropdown-item">Activate License</a>
</li>
                                    
<li>
    <a href="../../quickstart/configure-networking/" class="dropdown-item">Configure Networking</a>
</li>
                                    
<li>
    <a href="../../quickstart/configuring-mail/" class="dropdown-item">Configuring Mail</a>
</li>
                                    
<li>
    <a href="../../quickstart/enabling-iFAX-support-access/" class="dropdown-item">Enabling iFAX Support Access</a>
</li>
                                    
<li>
    <a href="../../quickstart/configuring-telco-connections/" class="dropdown-item">Configuring Telco Connections</a>
</li>
                                    
<li>
    <a href="../../quickstart/configure-dialing-options/" class="dropdown-item">Configure Dialing Options</a>
</li>
                                    
<li>
    <a href="../../quickstart/web-interface-start-up/" class="dropdown-item">Web Interface Startup</a>
</li>
                                    
<li>
    <a href="../../quickstart/web-interface-admin-basics/" class="dropdown-item">Web Interface Admin Basics</a>
</li>
                                    
<li>
    <a href="../../quickstart/web-interface-DID-routes/" class="dropdown-item">Web Interface DID Routes</a>
</li>
                                    
<li>
    <a href="../../quickstart/notes/" class="dropdown-item">Notes</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Enterprise Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../overview/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../license-activation/" class="dropdown-item">License Activation</a>
</li>
                                    
<li>
    <a href="../inbound-fax-routing/" class="dropdown-item">Inbound FAX Routing</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Sending Faxes</a>
</li>
                                    
<li>
    <a href="../client-access/" class="dropdown-item">Client Access</a>
</li>
                                    
<li>
    <a href="../email-templates/" class="dropdown-item">Email Templates</a>
</li>
                                    
<li>
    <a href="../firewall-configuration/" class="dropdown-item">Firewall Configuration</a>
</li>
                                    
<li>
    <a href="../cron-jobs/" class="dropdown-item">Cron Jobs</a>
</li>
                                    
<li>
    <a href="../troubleshooting/" class="dropdown-item">Troubleshooting and FAQ</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../inbound-fax-routing/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../client-access/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#sending-faxes" class="nav-link">Sending Faxes</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#sendfax" class="nav-link">sendfax</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#custom-client-applications" class="nav-link">Custom Client Applications</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#web-interface" class="nav-link">Web Interface</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#email-to-fax" class="nav-link">Email-to-Fax</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#modem-control" class="nav-link">Modem Control</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="sending-faxes">Sending Faxes</h1>
<hr />
<h2 id="sendfax">sendfax</h2>
<p>HylaFAX includes a command line program called sendfax for sending faxes. Typical usage would be something like:</p>
<pre><code class="language-bash">$ sendfax  -f  &quot;myname@mydomain.com&quot;  -R  -r  &quot;faxsubject&quot;  -c  &quot;coverpage  comments&quot;  -x  &quot;Recipient’s
company&quot; -d &quot;Recipient@1234567&quot; tofax.pdf
</code></pre>
<p>where <strong><em>myname@mydomain.com</em></strong> is a valid e-mail address for the sender, <strong><em>1234567</em></strong> is the number where to fax, and <strong><em>tofax.pdf</em></strong> is the image file to be faxed. Standard HylaFAX-compatible file formats are ASCII, TIFF, PostScript, and PDF.</p>
<p>Be aware that sendfax is capable of handling multiple -d options and that only the options that precede it apply to that instance of the -d. In most cases the -d option is the last option that should be used. See the sendfax manpage for more information.</p>
<pre><code class="language-bash">man sendfax
</code></pre>
<hr />
<h3 id="sendfax-options"><code>sendfax</code> options:</h3>
<h4 id="priorities">Priorities</h4>
<hr />
<p><code>-P</code> </p>
<p>Ex: <strong><em>sendfax -P 63 ...</em></strong></p>
<p>Priority Assign the specified scheduling priority to subsequent jobs. A priority is an integer value in the range [0-255]. Lower values result in higher priority processing. </p>
<p>By default, each job is assigned 127 for an initial scheduling priority. If a job’s priority is greater than bulk faxes then the job’s priority is raised (numerically lowered) for each failed attempt to transmit so that retransmit attempts are done ahead of newly submitted jobs. In the case of bulk faxes (numerically higher than 190), then the job’s priority is lowered (numerically raised) for each failed attempt to transmit so that the whole of the bulk-queued jobs will be attempted before any are retried. </p>
<p>The priority may also be specified as one of the following symbolic names: default or normal (127), bulk or junk (191), low (190), or high (63).</p>
<hr />
<h4 id="compression">Compression</h4>
<hr />
<p><code>-1</code></p>
<p>Ex: <strong><em>sendfax -1 ...</em></strong></p>
<p>Transmit  facsimile  documents using 1-D MH compression.  By default HylaFAX will use the optimal compression scheme supported by the transmitting modem and receiving facsimile device.</p>
<p><code>-2</code></p>
<p>Ex: <strong><em>sendfax -2 ...</em></strong></p>
<p>Transmit facsimile documents using 2-D MR compression, if possible. By default HylaFAX will use the optimal compression scheme supported by the transmitting modem and receiving facsimile device.</p>
<p><code>-3</code></p>
<p>Ex: <strong><em>sendfax -3 ...</em></strong></p>
<p>Transmit facsimile documents using 2-D MMR compression, if possible.  By default HylaFAX will use the optimal compression scheme supported by the transmitting modem and receiving facsimile device.</p>
<hr />
<h4 id="speed">Speed</h4>
<hr />
<p><code>-b speed</code> </p>
<p>Ex: <strong><em>sendfax -b 14400 ...</em></strong></p>
<p>Transmit facsimile documents using a signalling rate that is constrained to be at least speed bits/second. If the specified speed is greater than the transmitting modem or receiver is capable of, it is reduced to the highest possible speed both devices support. If a negotiated signalling rate greater than or equal to speed cannot be negotiated then the job is aborted. Possible speeds are: 2400, 4800, 7200, 9600, 12000, 14400, 16800, 19200, 21600, 24000, 26400, 28800, 31200, and 33600. By default Hyla FAX will use the fastest possible rate supported by the transmitting modem and receiving facsimile device.</p>
<p><code>-B speed</code> </p>
<p>Ex: <strong><em>sendfax -B 2400 ...</em></strong></p>
<p>Try to transmit facsimile documents using the desired signalling rate. Possible speeds are: 2400, 4800, 7200, 9600, 12000, 14400, 16800, 19200, 21600, 24000, 26400, 28800, 31200, and 33600. If the specified speed is greater than the transmitting modem or receiver is capable of, it is reduced to the highest possible speed both devices support. By default Hyla FAX will use the fastest possible rate supported by the transmitting modem and receiving facsimile device (unless restricted by other server configuration); this option can be used to reduce the speed. Note that international calls are frequently more reliable when transmissions are restricted to 9600 bits/second. For Class 1/1.0 devices, if the specified speed is not greater than 14400 then V.34 will not be attempted, and if the specified speed is 9600 or 7200 then V.29 will be assumed in lieu of V.17. </p>
<hr />
<h4 id="caller-id-tsi">Caller ID /tsi</h4>
<hr />
<p><code>-S</code></p>
<p>Ex: <strong><em>sendfax -S 1234567890 ...</em></strong></p>
<p>Pass tsi to the server as the suggested sender identification to be used, for example, in tagline imaging and fax protocol.</p>
<hr />
<h4 id="use-specific-modem">Use specific modem</h4>
<hr />
<p><code>-h modem@localhost</code></p>
<p>Ex: <strong><em>sendfax -h boston00@localhost ...</em></strong></p>
<hr />
<h4 id="tries-and-max-dials">Tries and Max dials</h4>
<hr />
<ul>
<li>Create a page for deeper explination of both</li>
</ul>
<p><code>-t tries</code></p>
<p>Ex: <strong><em>sendfax -t 6 ...</em></strong></p>
<p>Make no more than tries attempts to send the facsimile. (A try is a call in which carrier is established and the facsimile protocol is commenced; this is contrasted with a call attempt that might have failed because the line was busy.) Without specifying a "tries" value to the server Hyla FAX will, with some exceptions, make an unlimited number of attempts to completely send the facsimile before the kill time expires. (The exceptions are that Hyla FAX will terminate a job if 3 consecutive attempts to send a particular page fail, or if it appears the receiver is not a facsimile machine.) Use ''-1'' to indicate that no tries value should be specified to the server.</p>
<p><code>-T maxdials</code></p>
<p>Ex: <strong><em>sendfax -T 4 ...</em></strong></p>
<p>Make no more than maxdials calls in attempting to send the facsimile. By default, HylaFAX will redial 12 times before killing a job. Use ''-1'' to indicate that no maxdials value should be specified to the server. </p>
<hr />
<h2 id="custom-client-applications">Custom Client Applications</h2>
<hr />
<p>Should  you  desire  to  write  your  own  client  application  for  submitting  faxes  to  HylaFAX,  below  are
sample applications in .NET and Java:
• .NET sample client http://people.ifax.com/~david/dotnetsample.zip
• Java sample client http://people.ifax.com/~david/javasample.zip</p>
<hr />
<h2 id="web-interface">Web Interface</h2>
<hr />
<ul>
<li>add link to web interface doc</li>
</ul>
<hr />
<h2 id="email-to-fax">Email-to-Fax</h2>
<hr />
<p><img alt="Screenshot" src="../img/Email-to-Fax.png" />
Email to FAX is simply a matter of Postfix receiving an email and handing it off to the faxmail program. Postfix is the email server that receives the email, and faxmail is a program included with HylaFAX for processing email messages and submitting them to HylaFAX for faxing.</p>
<p>In the "Configuring Mail" area of the HylaFAX Enterprise Appliance console, you can set up Email to FAX support.</p>
<p>To configure Email to FAX support, enter the domain name that you intend to use into the “Fax Domain” field (ie. fax.example.com) and save your changes. Keep in mind that your mail server must be able to lookup the Fax Domain in your network's DNS in order to deliver emails to the HylaFAX Enterprise server.</p>
<p>Next, send the email by addressing the recipient using the "FAXNUMBER@fax.example.com" format where FAXNUMBER is the actual fax number. If the job was successfully added to the HylaFAX queue, you'll see it in the Outbox of web interface and in the output of "faxstat -s".</p>
<hr />
<h3 id="email-to-fax-tweaks">Email-to-Fax tweaks:</h3>
<h4 id="increase-postfix-message-size-limit">Increase postfix message size limit</h4>
<hr />
<p>To review the current maximum message size limit, run:</p>
<pre><code class="language-bash">postconf message_size_limit
</code></pre>
<p>To increase the max message size limit, run:</p>
<pre><code class="language-bash">postconf -e message_size_limit=20480000
postfix reload
</code></pre>
<hr />
<h4 id="multiple-fax-domains">Multiple Fax Domains</h4>
<hr />
<p>To set this up you will need to edit the postfix configration file <code>main.cf</code> located at <strong><em>/etc/postfix/</em></strong>. At the bottom of this file is the variable <code>relay_domains</code>. Add your new domains to that variable separated by a comma.</p>
<pre><code class="language-bash">relay_domains= faxserver.example.com, faxserver.test.com, faxserver.ifax.com
</code></pre>
<p>In the file virtual_alias-fax located at <strong><em>/etc/postfix/</em></strong> , add a line at the bottom for each new domain in this style (this would be to add "fax.newdomain.com" as an email-to-FAX domain:</p>
<pre><code class="language-bash">/^([+]?[0-9*#.-]+)@fax\.newdomain\.com$/ $1@fax.localhost
</code></pre>
<p>Finally reload the postfix configuration:</p>
<pre><code class="language-bash">postfix reload
</code></pre>
<hr />
<h4 id="ignore-email-body">Ignore Email Body</h4>
<hr />
<p>If you would like to ignore the email body of an Email to FAX message, execute the following command:</p>
<pre><code class="language-bash">ln -s /bin/true /usr/sbin/faxmail/text/plain
</code></pre>
<p>That file tells faxmail to ignore "text/plain" email attachments, which is what the email body consists of. Simply delete <strong><em>/usr/sbin/faxmail/text/plain</em></strong> and faxmail will send the email body in addition to any other plain text files in the email to HylaFAX for faxing.</p>
<hr />
<h4 id="disable-email-headers">Disable Email Headers</h4>
<hr />
<p>Create <strong><em>/etc/hylafax/faxmail.conf</em></strong> with the following content to disable the email headers from appearing in the fax:</p>
<pre><code class="language-bash">AutoCoverPage: false
TextPointSize: 12pt
Headers: clear
MailUser: faxmail
TrimText: yes
</code></pre>
<hr />
<h4 id="disable-cover-pages">Disable Cover Pages</h4>
<hr />
<p>Create <strong><em>/etc/hylafax/faxmail.conf</em></strong> with the following content to disable the email headers from appearing in the fax:</p>
<pre><code class="language-bash">AutoCoverPage: false
TextPointSize: 12pt
Headers: clear
MailUser: faxmail
TrimText: yes
</code></pre>
<hr />
<h2 id="modem-control">Modem Control</h2>
<h3 id="specifying-default-outbound-devices">Specifying Default Outbound Devices</h3>
<hr />
<p>You can use the <code>ModemReadyState</code> parameter in the <strong><em>/var/spool/hylafax/etc/config.bostonXX</em></strong> files to control whether or not the device is assigned to outbound jobs.</p>
<p>For example, if you want to dedicate <code>boston00</code> to <code>boston01</code> for receiving faxes only (thus allowing <code>boston02-07</code> to both send and receive faxes), then you would add the following setting to files <code>config.boston00</code> and <code>config.boston01</code>:</p>
<pre><code class="language-bash">ModemReadyState: D
</code></pre>
<p>That would tell HylaFAX not to use boston00 and boston01 for outbound jobs. For details, please see the <code>hylafax-config</code> manpage.</p>
<p>Afterward, restart the affected btgettys so that they immediately reload their configuration:</p>
<p>faxquit boston00; faxquit boston01</p>
<p>-or-</p>
<p>for i in /var/spool/hylafax/FIFO.boston0[0-1]; do echo Q &gt; $i; done</p>
<hr />
<h3 id="modem-order">Modem Order</h3>
<hr />
<p>In /var/spool/hylafax/etc/config, you can use the “any” modem group to specify which modem devices to use. For example, to only use boston00 to boston07, use:</p>
<p>ModemGroup: “any:boston0[0-7]"</p>
<p>The field is a regular expression and can get as complicated as it needs to be. For example, to use boston00 through boston12, here's the regexp:</p>
<p>"any:boston(0[0-9]|1[0-2])"</p>
<p>No restarts are required to put this into effect.</p>
<p>Additionally, you can tell the system in which order to use the devices. You can specify a modem priority for each channel by editing the /var/spool/hylafax/etc/config.bostonXX files and adding the ModemPriority parameter, which sets the scheduling priority to use for a modem. Priority values are in the range 0 to 255 with lesser values signifying higher (more desirable) priority. The HylaFAX scheduler process assigns the highest priority modem that is ready for use when scheduling an outbound job. If multiple available modems in a job's selected ModemGroup have the same ModemPriority value, then the HylaFAX scheduler assigns jobs to them in a round-robin fashion.</p>
<p>For example, in config.boston22 add:</p>
<p>ModemPriority: 0</p>
<p>And in config.boston00 add:</p>
<p>ModemPriority: 23</p>
<p>And in files config.boston21 to config.boston01 complete the range of values. For example:</p>
<p>config.boston21: ModemPriority: 1
config.boston20: ModemPriority: 2
config.boston19: ModemPriority: 3
...
config.boston02: ModemPriority: 21
config.boston01: ModemPriority: 22</p>
<p>Afterwards, restart the btgetty's so that they immediately reload their configuration.</p>
<p>for i in /var/spool/hylafax/FIFO.boston0[0-1]; do echo Q &gt; $i; done</p>
<hr />
<h3 id="pausing-modems">Pausing Modems</h3>
<hr />
<p>Add the following to the bottom of /var/spool/hylafax/etc/config:</p>
<p>ModemGroup: "any:hold"</p>
<p>No restarts are required to put this into effect. (faxq rereads the etc/config file after receiving another event - such as a new job being created - so once the file is edited, no new jobs will be sent.)</p>
<p>When all channels are "Running and idle” then the queue is officially paused.</p>
<p>Then to un-pause the queue, comment out the ModemGroup line. At that point you can force faxq to reread the config file by running</p>
<p>echo Z &gt; /var/spool/hylafax/FIFO</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
