<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Troubleshooting and FAQ - HylaFAX Enterprise Guide</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">HylaFAX Enterprise Guide</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Quickstart Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../quickstart/appliance-installation/" class="dropdown-item">Getting Started</a>
</li>
                                    
<li>
    <a href="../../quickstart/installing-the-iso/" class="dropdown-item">Installing the iso</a>
</li>
                                    
<li>
    <a href="../../quickstart/activating-the-license/" class="dropdown-item">Activate License</a>
</li>
                                    
<li>
    <a href="../../quickstart/configure-networking/" class="dropdown-item">Configure Networking</a>
</li>
                                    
<li>
    <a href="../../quickstart/configuring-mail/" class="dropdown-item">Configuring Mail</a>
</li>
                                    
<li>
    <a href="../../quickstart/enabling-iFAX-support-access/" class="dropdown-item">Enabling iFAX Support Access</a>
</li>
                                    
<li>
    <a href="../../quickstart/configuring-telco-connections/" class="dropdown-item">Configuring Telco Connections</a>
</li>
                                    
<li>
    <a href="../../quickstart/configure-dialing-options/" class="dropdown-item">Configure Dialing Options</a>
</li>
                                    
<li>
    <a href="../../quickstart/web-interface-start-up/" class="dropdown-item">Web Interface Startup</a>
</li>
                                    
<li>
    <a href="../../quickstart/web-interface-admin-basics/" class="dropdown-item">Web Interface Admin Basics</a>
</li>
                                    
<li>
    <a href="../../quickstart/web-interface-DID-routes/" class="dropdown-item">Web Interface DID Routes</a>
</li>
                                    
<li>
    <a href="../../quickstart/notes/" class="dropdown-item">Notes</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Enterprise Guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../overview/" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="../license-activation/" class="dropdown-item">License Activation</a>
</li>
                                    
<li>
    <a href="../inbound-fax-routing/" class="dropdown-item">Inbound FAX Routing</a>
</li>
                                    
<li>
    <a href="../sending-faxes/" class="dropdown-item">Sending Faxes</a>
</li>
                                    
<li>
    <a href="../client-access/" class="dropdown-item">Client Access</a>
</li>
                                    
<li>
    <a href="../email-templates/" class="dropdown-item">Email Templates</a>
</li>
                                    
<li>
    <a href="../firewall-configuration/" class="dropdown-item">Firewall Configuration</a>
</li>
                                    
<li>
    <a href="../cron-jobs/" class="dropdown-item">Cron Jobs</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">Troubleshooting and FAQ</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../cron-jobs/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" class="nav-link disabled">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#troubleshooting-and-faq" class="nav-link">Troubleshooting and FAQ</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#logs" class="nav-link">Logs</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#restarting-the-btgetty-and-faxgetty-processes" class="nav-link">Restarting the btgetty and faxgetty processes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#restarting-the-brooktrout-devices" class="nav-link">Restarting the Brooktrout devices</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#performing-a-packet-capture" class="nav-link">Performing a Packet Capture</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#uninstalling-hylafax-enterprise" class="nav-link">Uninstalling HylaFAX Enterprise</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#manuals" class="nav-link">Manuals</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#manuals-online" class="nav-link">Manuals Online</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#frequently-asked-questions" class="nav-link">Frequently Asked Questions</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#what-are-hangup-dcn-received-in-command-receive-errors" class="nav-link">What are "Hangup: DCN received in Command-Receive" errors?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#invalid-dialing-command-errors" class="nav-link">"Invalid dialing command" errors?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#no-loop-current" class="nav-link">"No loop current"</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#no-carrier-detected-errors" class="nav-link">No carrier detected" errors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#bfvfaxendofdocument-did-not-return-in-600000ms-errors" class="nav-link">"BfvFaxEndOfDocument did not return in 600000ms" errors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#blocked-by-concurrent-calls" class="nav-link">Blocked by Concurrent calls</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#limit-all-fax-transmissions-to-9600-bits-v29" class="nav-link">limit all fax transmissions to 9,600 bit/s (V.29)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#brooktrout-tr1034-how-many-rings-will-the-hylafax-server-wait-before-timing-out-assuming-there-is-no-carrier-on-the-other-end" class="nav-link">Brooktrout TR1034 how many rings will the HylaFAX server wait before timing out assuming there is no carrier on the other end?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="troubleshooting-and-faq">Troubleshooting and FAQ</h1>
<h2 id="logs">Logs</h2>
<p>When troubleshooting problems, it is important to take a look at the logs. HylaFAX creates a new session log file in <code>log/</code> for every fax transmission. </p>
<p>See the <strong><em>hylafax-log</em></strong> manpage for specific error message information.</p>
<p>It may also be prudent to turn up <strong><em>ServerTracing</em></strong> in the <code>etc/config</code> file, and  <strong><em>SessionTracing</em></strong> in the <code>etc/CONFIG/site</code> file. The normal debugging value would be <strong><em>0xFFF</em></strong>. For increased low-level output, use <strong><em>0xFFFFF</em></strong>. You must restart the <code>faxgetty</code> and <code>btgetty</code> processes after editing <code>etc/CONFIG/site</code>.</p>
<h2 id="restarting-the-btgetty-and-faxgetty-processes">Restarting the btgetty and faxgetty processes</h2>
<p>After making a configuration change to <code>etc/config.bostonXX</code>, <code>etc/config.ttySX</code>, or any of the files that those files include, run the following to restart the btgetty and/or faxgetty processes that read those configuration files:</p>
<pre><code class="language-bash">for i in /var/spool/hylafax/FIFO.*; do echo Q &gt; $i; done
</code></pre>
<p>The <strong><em>echo Q</em></strong> will restart them gracefully, meaning that if they are receiving a fax, they will restart only after they’re done.</p>
<h2 id="restarting-the-brooktrout-devices">Restarting the Brooktrout devices</h2>
<p>To completely restart the Brooktrout TR1034 and/or SR140 execute:</p>
<pre><code class="language-bash">systemctl restart hylafax-bt
</code></pre>
<h2 id="performing-a-packet-capture">Performing a Packet Capture</h2>
<p>You can perform the packet captures by running the following command before sending a fax:</p>
<pre><code class="language-bash">tcpdump -s0 -n -i eth0 -w /tmp/sip.pcap udp or icmp
</code></pre>
<p>If you’re not using <code>eth0</code> for SIP/T.38, replace eth0 with the name of your ethernet adapter (e.g. ens33, ens192, sit0, etc) in the command above.</p>
<p>Hit Ctrl+c to stop the capture when the call is complete.</p>
<p>You can view the status of the fax server by running the following command in order to know what it’s currently doing in real time:</p>
<pre><code class="language-bash">watch faxstat -s
</code></pre>
<p>Execute <code>gzip /tmp/sip.pcap</code> to compress the pcap file before sending it to us.</p>
<h2 id="uninstalling-hylafax-enterprise">Uninstalling HylaFAX Enterprise</h2>
<p>To uninstall HylaFAX Enterprise, run:</p>
<pre><code class="language-bash">yum remove hylafax-enterprise-appliance
</code></pre>
<h2 id="manuals">Manuals</h2>
<p>UNIX Man Pages
For a better understanding of the HylaFAX system, you’ll want to read the following man pages:
• man hylafax-server
• man hylafax-client
• man hylafax-config
• man xferfaxlog
• man faxrcvd
• man notify
• man faxmail
• man hosts.hfaxd
• man faxadduser
• man faxdeluser</p>
<h2 id="manuals-online">Manuals Online</h2>
<p>You can also find the most comprehensive documentation online at:</p>
<p>http://www.hylafax.org/content/Handbook</p>
<p>and</p>
<p>http://www.hylafax.org/content/Man_Pages</p>
<h1 id="frequently-asked-questions">Frequently Asked Questions</h1>
<h2 id="what-are-hangup-dcn-received-in-command-receive-errors">What are "Hangup: DCN received in Command-Receive" errors?</h2>
<p>That basically means that the remote side sent us a DCN (disconnect) signal unexpectedly. There are
many reasons for which they may have done this, ranging from someone on the sending side asking
their  fax  machine  to  abort  the  transmission,  to  more  problematic  situations  like  bad  phone  line
condition.  One  should  only  worry  about  these  if  they’re  consistently  failing  with  a  specific  fax
number — in that case there may be a problem that bears further examination. But if only a small
number of these are seen, and if the same fax number that failed a few minutes earlier reconnects
and  successfully  transmits  a  fax,  then  they’re  not  worth  worrying  about.  Occasional  failures  are  a
fact of life, but systematic errors are worth investigating.</p>
<h2 id="invalid-dialing-command-errors">"Invalid dialing command" errors?</h2>
<p>In  most  cases,  "Invalid  dialing  command"  means  that  the  telephone  company  or  PBX  rejected  our
call as invalid, or played us a 'your call cannot be completed as dialed' recording. Check the number
and try again.</p>
<h2 id="no-loop-current">"No loop current"</h2>
<p>The "No loop current" error happens when the fax modem is expecting a normal fax transmission
but the remote side of the call hangs up instead. Regarding inbound calls, this usually occurs when
someone dials the fax server’s number and hangs up once they hear fax tones.</p>
<h2 id="no-carrier-detected-errors">No carrier detected" errors</h2>
<p>"No  carrier  detected"  errors  typically  occur  when  the  modem  dials  a  number  and  establishes  a
connection but is unable to detect a "fax carrier" like a fax server or fax machine. In this case, the
modem  will  eventually  hang  up  and  show  the  "No  carrier  detected"  error.  Should  this  happen,
verify  that  the  fax  number  is  answered  by  a  fax  machine  and  not  an  answering  machine  or
something else.</p>
<h2 id="bfvfaxendofdocument-did-not-return-in-600000ms-errors">"BfvFaxEndOfDocument did not return in 600000ms" errors</h2>
<p>The  BfvFaxEndOfDocument  error  occurs  when  a  timeout  of  10  minutes  has  elapsed  after  the  last
page is sent and before the end of transmission. This can occur when sending complex pages at slow
speeds  and/or  when  there  are  multiple  Partial  Page  Requests  (PPR),  but  this  shouldn’t  occur
frequently.</p>
<h2 id="blocked-by-concurrent-calls">Blocked by Concurrent calls</h2>
<p>By  default,  HylaFAX  will  schedule  a  job  immediately  if  a  modem  is  available.  However,  if  you’re
sending  multiple  fax  jobs  to  the  same  destination,  the  first  job  will  be  sent  out  immediately  while
the second one waits for the transmission to complete. HylaFAX does this in order to avoid calling a
fax machine that is known to be busy. If you know that specific destinations have multiple fax lines,
you  can  use  a  JobControl  script  to  dynamically  configure  the  MaxConcurrentCalls  setting  for  those
destinations (thus allowing HylaFAX to place multiple simultaneous calls to those destinations).
For details on MaxConcurrentCalls, please see the hylafax-config manpage.
A sample JobControl script can be found here:
http://people.ifax.com/~david/jobcontrol/jobcontrol-cid.sh</p>
<h2 id="limit-all-fax-transmissions-to-9600-bits-v29">limit all fax transmissions to 9,600 bit/s (V.29)</h2>
<p>Yes, edit /var/spool/hylafax/etc/CONFIG/boston and add the following parameter:
BTWireModulation: V29
Afterwards, restart the 'btgetty' processes.
Can I install VMware Tools?
Yes, on CentOS 7, simply install the 'open-vm-tools' package.
Why are we seeing "SIP 488 Not Acceptable Here" messages in our packet captures?
We’ve usually seen this for outbound calls when the remote side answers the call but takes longer
than  usual  before  sending  fax  tones.  This  can  be  caused  by  some  sort  of  a  device  that  answers  the
call  in  order  to  determine  whether  it  is  a  fax  call  before  transferring  the  call  to  a  fax  machine.
Usually when there is a problem when this happens it’s because the CED timeout to receive the T.38
re-INVITE  has  expired  by  the  time  the  SIP  gateway  sends  the  T.38  re-INVITE.  The  SR140  will  then
send "SIP 488 Not Acceptable Here" and fallback to G.711 (if configured to do so) or end the call.
To extend the CED timeout, add the following parameter to /var/spool/hylafax/etc/CONFIG/boston:
BTCEDTimeout:  30
Afterwards, restart the btgetty processes.</p>
<h2 id="brooktrout-tr1034-how-many-rings-will-the-hylafax-server-wait-before-timing-out-assuming-there-is-no-carrier-on-the-other-end">Brooktrout TR1034 how many rings will the HylaFAX server wait before timing out assuming there is no carrier on the other end?</h2>
<p>The length of time HylaFAX will wait to establish a conversation with the receiver when sending is
controlled  by  the  ced_timeout  parameter.  By  default  it’s  40  seconds.  To  change  that  to  60,  edit
ifax/bt/config/btcall.cfg and change:
ced_timeout    4000
to
ced_timeout    6000
The value specifies the length of time, in 10 ms units, to wait for a fax answer tone (CED tone) from
a  remote  fax  machine.  The  maximum  value  is  65535  (655  seconds).  Once  you’ve  saved  your
changes, you don’t need to restart HylaFAX — changes made to this file take effect immediately.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
