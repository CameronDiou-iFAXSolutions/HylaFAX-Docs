{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to the HylaFAX Handbook! \u00b6","title":"Welcome to the HylaFAX Handbook!"},{"location":"#welcome-to-the-hylafax-handbook","text":"","title":"Welcome to the HylaFAX Handbook!"},{"location":"master/client-access/","text":"Setting up Client Access \u00b6 It is necessary to specify which client machines and users can have access to a HylaFAX server machine. This is specified by the contents of the etc/hosts.hfaxd file. The contents of this file is specified in the hosts.hfaxd(5F) manual page. The default etc/hosts.hfaxd file that comes with HylaFAX permits anyone to have access through the localhost network interface (loopback). Here is an example hosts.hfaxd: localhost 127 .0.0.1 It is a good idea to refine the controls specified in this file before providing general access to the server. Access can be restricted both on a per-client-machine basis and by user. Passwords can also be required though support for this is presently somewhat awkward. The etc/hosts.hfaxd file must be owned by the fax user and be mode 0600 or the hfaxd daemon will not permit client access. To enable everyone on your local '10.1.x.x' network, you can use the following example: ^.*@10 \\. 1 \\. [ 0 -9 ]{ 1 ,3 } \\. [ 0 -9 ]{ 1 ,3 } If you trust your internal networks, a rule at the beginning of the etc/hosts.hfaxd file such as: ^.*@.*$ will allow any user password-less access to the server using any username they wish. To create individual HylaFAX users, you must use the faxadduser command. Example: faxadduser -p secret myuser For more in-depth information, please see the faxadduser , faxdeluser and hosts.hfaxd manpages. Removing Jobs from the Queue \u00b6 In order to remove a job from the queue, you must set the FAXUSER environment variable to the owner of the fax job and then use faxrm JOBID . Example: export FAXUSER = cam faxrm 2007 To remove all jobs in queue for a specific sender, use the following script: !/bin/sh for i in $( faxstat -s -O 'JobFmt: \"%j %o\"' | grep $1 | cut -f 1 -d ' ' ) ; do FAXUSER = $1 faxrm $i ; done Execute: ./script.sh david Viewing Received Faxes \u00b6 In order for client applications to access your received faxes, the TIF file permissions in the recvq/ directory must be world-readable. This is accomplished by changing RecvFileMode in the etc/CONFIG/site . Set the following: RecvFileMode: 0644 You must also restart the faxgetty and/or btgetty processes as discussed in Troubleshooting Afterwards, execute the following command: chmod 0644 /var/spool/hylafax/recvq/*.tif Your client should now have access to retrieve and display your received faxes.","title":"Client Access"},{"location":"master/client-access/#setting-up-client-access","text":"It is necessary to specify which client machines and users can have access to a HylaFAX server machine. This is specified by the contents of the etc/hosts.hfaxd file. The contents of this file is specified in the hosts.hfaxd(5F) manual page. The default etc/hosts.hfaxd file that comes with HylaFAX permits anyone to have access through the localhost network interface (loopback). Here is an example hosts.hfaxd: localhost 127 .0.0.1 It is a good idea to refine the controls specified in this file before providing general access to the server. Access can be restricted both on a per-client-machine basis and by user. Passwords can also be required though support for this is presently somewhat awkward. The etc/hosts.hfaxd file must be owned by the fax user and be mode 0600 or the hfaxd daemon will not permit client access. To enable everyone on your local '10.1.x.x' network, you can use the following example: ^.*@10 \\. 1 \\. [ 0 -9 ]{ 1 ,3 } \\. [ 0 -9 ]{ 1 ,3 } If you trust your internal networks, a rule at the beginning of the etc/hosts.hfaxd file such as: ^.*@.*$ will allow any user password-less access to the server using any username they wish. To create individual HylaFAX users, you must use the faxadduser command. Example: faxadduser -p secret myuser For more in-depth information, please see the faxadduser , faxdeluser and hosts.hfaxd manpages.","title":"Setting up Client Access"},{"location":"master/client-access/#removing-jobs-from-the-queue","text":"In order to remove a job from the queue, you must set the FAXUSER environment variable to the owner of the fax job and then use faxrm JOBID . Example: export FAXUSER = cam faxrm 2007 To remove all jobs in queue for a specific sender, use the following script: !/bin/sh for i in $( faxstat -s -O 'JobFmt: \"%j %o\"' | grep $1 | cut -f 1 -d ' ' ) ; do FAXUSER = $1 faxrm $i ; done Execute: ./script.sh david","title":"Removing Jobs from the Queue"},{"location":"master/client-access/#viewing-received-faxes","text":"In order for client applications to access your received faxes, the TIF file permissions in the recvq/ directory must be world-readable. This is accomplished by changing RecvFileMode in the etc/CONFIG/site . Set the following: RecvFileMode: 0644 You must also restart the faxgetty and/or btgetty processes as discussed in Troubleshooting Afterwards, execute the following command: chmod 0644 /var/spool/hylafax/recvq/*.tif Your client should now have access to retrieve and display your received faxes.","title":"Viewing Received Faxes"},{"location":"master/cron-jobs/","text":"Cron Jobs \u00b6 The HylaFAX Enterprise packages install the following cron jobs: /etc/cron.daily/hylafax \u00b6 #!/bin/sh # Source HylaFAX EE wrapper if [ -f /etc/hylafax/wrapper.sh ] ; then . /etc/hylafax/wrapper.sh fi /usr/sbin/faxcron | mail -s \"HylaFAX Usage Report\" faxmaster exit 0 Routine housecleaning in the recvq/ directory is performed by HylaFAX\u2019s faxcron program, which is executed daily from the /etc/cron.daily/ hylafax crontab. For example, if you\u2019re looking to change the expiration time for received faxes, you\u2019ll need to edit the faxcron command in that crontab and to use the -rcv option along with the desired number of days. /etc/cron.hourly/hylafax \u00b6 #!/bin/sh # Source HylaFAX EE wrapper if [ -f /etc/hylafax/wrapper.sh ] ; then . /etc/hylafax/wrapper.sh fi /usr/sbin/faxqclean exit 0 Completed jobs (whether they were sent successfully or not) are stored in the HylaFAX doneq/ directory, and there is a crontab that performs routine maintenance in that directory called faxqclean , which is executed from /etc/cron.hourly/hylafax . You can use the -j option to specify the job age threshold (in seconds) that controls how long jobs may reside in the doneq/ directory before being removed. /etc/cron.d/hylafax-enterprise-web \u00b6 0 0 * * * uucp /var/www/fax/includes/webfaxcron.php -t 0 -i 30 > /dev/null 2 > & 1 usage: webfaxcron.php -i num-days -d num-days -t num-days options: -i num-days prune Inbox of faxes older than number of days -d num-days delete faxes from Inbox/Archive that are older than number of days -t num-days clean web temporary directory of files older than number of days For example, if you want to Archive all faxes older than 5 days, and remove archived faxes older than 30 days, you might run: /var/www/fax/includes/webfaxcron.php -t 1 -i 5 -d 30 The webfaxcron script should already be scheduled in the /etc/cron.d/hylafax-enterprise-web crontab to clean the temp files in /var/www/fax/tmp/ at midnight every night. Deletions from the archive are noted in the web interface SysLog: for each removed fax there's an entry: prune_archive> deleting faxid '#'","title":"Cron Jobs"},{"location":"master/cron-jobs/#cron-jobs","text":"The HylaFAX Enterprise packages install the following cron jobs:","title":"Cron Jobs"},{"location":"master/cron-jobs/#etccrondailyhylafax","text":"#!/bin/sh # Source HylaFAX EE wrapper if [ -f /etc/hylafax/wrapper.sh ] ; then . /etc/hylafax/wrapper.sh fi /usr/sbin/faxcron | mail -s \"HylaFAX Usage Report\" faxmaster exit 0 Routine housecleaning in the recvq/ directory is performed by HylaFAX\u2019s faxcron program, which is executed daily from the /etc/cron.daily/ hylafax crontab. For example, if you\u2019re looking to change the expiration time for received faxes, you\u2019ll need to edit the faxcron command in that crontab and to use the -rcv option along with the desired number of days.","title":"/etc/cron.daily/hylafax"},{"location":"master/cron-jobs/#etccronhourlyhylafax","text":"#!/bin/sh # Source HylaFAX EE wrapper if [ -f /etc/hylafax/wrapper.sh ] ; then . /etc/hylafax/wrapper.sh fi /usr/sbin/faxqclean exit 0 Completed jobs (whether they were sent successfully or not) are stored in the HylaFAX doneq/ directory, and there is a crontab that performs routine maintenance in that directory called faxqclean , which is executed from /etc/cron.hourly/hylafax . You can use the -j option to specify the job age threshold (in seconds) that controls how long jobs may reside in the doneq/ directory before being removed.","title":"/etc/cron.hourly/hylafax"},{"location":"master/cron-jobs/#etccrondhylafax-enterprise-web","text":"0 0 * * * uucp /var/www/fax/includes/webfaxcron.php -t 0 -i 30 > /dev/null 2 > & 1 usage: webfaxcron.php -i num-days -d num-days -t num-days options: -i num-days prune Inbox of faxes older than number of days -d num-days delete faxes from Inbox/Archive that are older than number of days -t num-days clean web temporary directory of files older than number of days For example, if you want to Archive all faxes older than 5 days, and remove archived faxes older than 30 days, you might run: /var/www/fax/includes/webfaxcron.php -t 1 -i 5 -d 30 The webfaxcron script should already be scheduled in the /etc/cron.d/hylafax-enterprise-web crontab to clean the temp files in /var/www/fax/tmp/ at midnight every night. Deletions from the archive are noted in the web interface SysLog: for each removed fax there's an entry: prune_archive> deleting faxid '#'","title":"/etc/cron.d/hylafax-enterprise-web"},{"location":"master/email-templates/","text":"Email Templates \u00b6 The email templates are in /var/spool/hylafax/etc/templates , with several languages available. When modifying templates, the best practice is to copy the entire language's directory to a new directory, so that it isn't affected by upgrades. In this example, we make a copy of the English templates: cd /var/spool/hylafax/etc/templates cp -a en en-modified cd en-modified Edit the templates in that new directory. Then, configure the system to use your templates: For incoming faxes, edit /var/spool/hylafax/etc/FaxDispatch For notification on outgoing faxes, edit /var/spool/hylafax/etc/FaxNotify In each file, you want to set the variable TEMPLATE to the directory with your custom templates. (This line already exists in FaxNotify ; it has to be specifically added to FaxDispatch .) Example: TEMPLATE = en-modified Once you save the file, your email templates will be used, with no restarts necessary. FaxDispatch and FaxNotify also control the From: address that's set in those templates. To change that, edit or set the variable FROMADDR. HTML-based Templates \u00b6 You can easily switch to the HTML templates and customize them for your organization by following these steps: Create a copy of the html-sample1 template directory in /var/spool/hylafax/etc/templates/ called custom-html : cp -a /var/spool/hylafax/etc/templates/ { html-sample1,custom-html } Add the following to your etc/FaxDispatch and etc/FaxNotify : TEMPLATE = custom-html Edit the font-family in the css.inc file to suit your needs. Once you\u2019ve saved the changes to etc/FaxDispatch and etc/FaxNotify , the new templates will be used the next time you receive and send a fax. Replace HylaFAX Agent \u00b6 You can easily replace all occurrences of \"HylaFAX Agent\" in the email templates with the following command: sed -i -e 's/HylaFAX Agent/My Fax Service/' /var/spool/hylafax/etc/templates/custom/*.txt Change From Email \u00b6 To change the email address that sends the email notifications for sent and received faxes, edit /var/spool/hylafax/etc/FaxDispatch and FaxNotify and set: FROMADDR = faxserver@example.com Once you save your changes, they will be applied automatically to the next email notifications. Disable Success Notifications to FaxMaster \u00b6 To receive notifications for failed fax transmissions only, set the following in /var/spool/hylafax/etc/FaxDispatch and FaxNotify : NOTIFY_FAXMASTER = errors To disable all fax transmission notifications to FaxMaster , use the following instead: NOTIFY_FAXMASTER = never Your changes are applied automatically.","title":"Email Templates"},{"location":"master/email-templates/#email-templates","text":"The email templates are in /var/spool/hylafax/etc/templates , with several languages available. When modifying templates, the best practice is to copy the entire language's directory to a new directory, so that it isn't affected by upgrades. In this example, we make a copy of the English templates: cd /var/spool/hylafax/etc/templates cp -a en en-modified cd en-modified Edit the templates in that new directory. Then, configure the system to use your templates: For incoming faxes, edit /var/spool/hylafax/etc/FaxDispatch For notification on outgoing faxes, edit /var/spool/hylafax/etc/FaxNotify In each file, you want to set the variable TEMPLATE to the directory with your custom templates. (This line already exists in FaxNotify ; it has to be specifically added to FaxDispatch .) Example: TEMPLATE = en-modified Once you save the file, your email templates will be used, with no restarts necessary. FaxDispatch and FaxNotify also control the From: address that's set in those templates. To change that, edit or set the variable FROMADDR.","title":"Email Templates"},{"location":"master/email-templates/#html-based-templates","text":"You can easily switch to the HTML templates and customize them for your organization by following these steps: Create a copy of the html-sample1 template directory in /var/spool/hylafax/etc/templates/ called custom-html : cp -a /var/spool/hylafax/etc/templates/ { html-sample1,custom-html } Add the following to your etc/FaxDispatch and etc/FaxNotify : TEMPLATE = custom-html Edit the font-family in the css.inc file to suit your needs. Once you\u2019ve saved the changes to etc/FaxDispatch and etc/FaxNotify , the new templates will be used the next time you receive and send a fax.","title":"HTML-based Templates"},{"location":"master/email-templates/#replace-hylafax-agent","text":"You can easily replace all occurrences of \"HylaFAX Agent\" in the email templates with the following command: sed -i -e 's/HylaFAX Agent/My Fax Service/' /var/spool/hylafax/etc/templates/custom/*.txt","title":"Replace HylaFAX Agent"},{"location":"master/email-templates/#change-from-email","text":"To change the email address that sends the email notifications for sent and received faxes, edit /var/spool/hylafax/etc/FaxDispatch and FaxNotify and set: FROMADDR = faxserver@example.com Once you save your changes, they will be applied automatically to the next email notifications.","title":"Change From Email"},{"location":"master/email-templates/#disable-success-notifications-to-faxmaster","text":"To receive notifications for failed fax transmissions only, set the following in /var/spool/hylafax/etc/FaxDispatch and FaxNotify : NOTIFY_FAXMASTER = errors To disable all fax transmission notifications to FaxMaster , use the following instead: NOTIFY_FAXMASTER = never Your changes are applied automatically.","title":"Disable Success Notifications to FaxMaster"},{"location":"master/firewall-configuration/","text":"Firewall Configuration \u00b6 Default Ports \u00b6 By default, your HylaFAX servers are listening to the following ports: TCP 22 SSH access TCP 25 Email to FAX submission TCP 80 Web interface TCP 4559 Fax job submission ( see below ) and fax status TCP 27000 & 27059 HylaFSP Site License server UDP 5060 SIP traffic UDP 56000 -57000 RTP/UDPTL media HylaFAX uses an FTP-style protocol on port 4559 . HylaFSP uses PASV (passive) transfers when transferring data to the HylaFAX server. As such, simply port-forwarding/tunneling port 4559 will not be sufficient. If you are not using normal IP connectivity between HylaFSP and HylaFAX, your firewall/border/tunneler has to do FTP fixups (or connection tracing/NAT) on the port it\u2019s forwarding. If you have Cisco PIX firewall, you need FTP fixups on port 4559 . Allow HTTPS \u00b6 If you have installed an SSL certificate, you must open the firewall for HTTPS using the following commands: firewall-cmd --zone = public --permanent --add-service = https firewall-cmd --reload Allow SIP only from certain addresses \u00b6 This can help keep your server from accepting SIP connections from anywhere else. firewall-cmd --zone = public --permanent --remove-service = sip firewall-cmd --zone = public --permanent --remove-port = 5060 /udp firewall-cmd --zone = public --permanent --remove-port = 5080 /udp firewall-cmd --zone = public --permanent --add-rich-rule = ' rule family=\"ipv4\" source address=\"123.456.789.0123/32\" port protocol=\"udp\" port=\"5060\" accept' firewall-cmd --zone = public --permanent --add-rich-rule = ' rule family=\"ipv4\" source address=\"456.789.012.3456/32\" port protocol=\"udp\" port=\"5060\" accept' firewall-cmd --reload","title":"Firewall Configuration"},{"location":"master/firewall-configuration/#firewall-configuration","text":"","title":"Firewall Configuration"},{"location":"master/firewall-configuration/#default-ports","text":"By default, your HylaFAX servers are listening to the following ports: TCP 22 SSH access TCP 25 Email to FAX submission TCP 80 Web interface TCP 4559 Fax job submission ( see below ) and fax status TCP 27000 & 27059 HylaFSP Site License server UDP 5060 SIP traffic UDP 56000 -57000 RTP/UDPTL media HylaFAX uses an FTP-style protocol on port 4559 . HylaFSP uses PASV (passive) transfers when transferring data to the HylaFAX server. As such, simply port-forwarding/tunneling port 4559 will not be sufficient. If you are not using normal IP connectivity between HylaFSP and HylaFAX, your firewall/border/tunneler has to do FTP fixups (or connection tracing/NAT) on the port it\u2019s forwarding. If you have Cisco PIX firewall, you need FTP fixups on port 4559 .","title":"Default Ports"},{"location":"master/firewall-configuration/#allow-https","text":"If you have installed an SSL certificate, you must open the firewall for HTTPS using the following commands: firewall-cmd --zone = public --permanent --add-service = https firewall-cmd --reload","title":"Allow HTTPS"},{"location":"master/firewall-configuration/#allow-sip-only-from-certain-addresses","text":"This can help keep your server from accepting SIP connections from anywhere else. firewall-cmd --zone = public --permanent --remove-service = sip firewall-cmd --zone = public --permanent --remove-port = 5060 /udp firewall-cmd --zone = public --permanent --remove-port = 5080 /udp firewall-cmd --zone = public --permanent --add-rich-rule = ' rule family=\"ipv4\" source address=\"123.456.789.0123/32\" port protocol=\"udp\" port=\"5060\" accept' firewall-cmd --zone = public --permanent --add-rich-rule = ' rule family=\"ipv4\" source address=\"456.789.012.3456/32\" port protocol=\"udp\" port=\"5060\" accept' firewall-cmd --reload","title":"Allow SIP only from certain addresses"},{"location":"master/hylafsp/","text":"HylaFSP Quickstart Guide Summary \u00b6 HylaFSP is an extremely lightweight client for Microsoft Windows and Apple macOS that offers a tightly integrated and completely native faxing experience. It\u2019s perfect for non-technical users and allows you to fax from any application you can print from. It even integrates with Windows/Outlook and macOS Address Books! For more information, visit us online: https://www.ifax.com/products/hylafsp/ Microsoft Windows System requirements \u00b6 \u2022 Windows 7, 8.1, or 10 (requires Workstation License) \u2022 Windows Server 2008, 2012, 2016 (requires Server License) Apple macOS System requirements \u00b6 \u2022 macOS 10.7 - 10.13 (requires Workstation License) Windows Install \u00b6 Here are the steps for installing HylaFSP on the Windows platform: Download HylaFSP \u00b6 https://www.ifax.com/software-downloads/ Double click on the HylaFSP setup.exe file and follow the on screen instructions Open HylaFSP from the Windows Control Panel and do the following: Click on the \"Server\" tab and enter your fax server\u2019s IP address. Click on the \"User Defaults\" tab and enter your HylaFAX username, password, and your email address in the respective fields. Click OK. Restart MS Fax Services (or reboot the PC). To print to fax, open a Notepad or Word document and select Print from the File menu. Select the \"Fax\" printer and click OK. When the Windows Fax & Scan wizard appears, select \"Connect to a fax modem\" and then choose all of the recommended options. In the next window that appears, enter the destination fax number and click Send. NOTE : HylaFSP is a virtual modem for Windows Fax Services. Therefore, during the initial configuration of Windows Fax & Scan, you\u2019ll want to select \"Connect to a fax modem\" instead of \"Connect to fax server\".","title":"HylaFSP"},{"location":"master/hylafsp/#summary","text":"HylaFSP is an extremely lightweight client for Microsoft Windows and Apple macOS that offers a tightly integrated and completely native faxing experience. It\u2019s perfect for non-technical users and allows you to fax from any application you can print from. It even integrates with Windows/Outlook and macOS Address Books! For more information, visit us online: https://www.ifax.com/products/hylafsp/","title":"Summary"},{"location":"master/hylafsp/#microsoft-windows-system-requirements","text":"\u2022 Windows 7, 8.1, or 10 (requires Workstation License) \u2022 Windows Server 2008, 2012, 2016 (requires Server License)","title":"Microsoft Windows System requirements"},{"location":"master/hylafsp/#apple-macos-system-requirements","text":"\u2022 macOS 10.7 - 10.13 (requires Workstation License)","title":"Apple macOS System requirements"},{"location":"master/hylafsp/#windows-install","text":"Here are the steps for installing HylaFSP on the Windows platform:","title":"Windows Install"},{"location":"master/hylafsp/#download-hylafsp","text":"https://www.ifax.com/software-downloads/ Double click on the HylaFSP setup.exe file and follow the on screen instructions Open HylaFSP from the Windows Control Panel and do the following: Click on the \"Server\" tab and enter your fax server\u2019s IP address. Click on the \"User Defaults\" tab and enter your HylaFAX username, password, and your email address in the respective fields. Click OK. Restart MS Fax Services (or reboot the PC). To print to fax, open a Notepad or Word document and select Print from the File menu. Select the \"Fax\" printer and click OK. When the Windows Fax & Scan wizard appears, select \"Connect to a fax modem\" and then choose all of the recommended options. In the next window that appears, enter the destination fax number and click Send. NOTE : HylaFSP is a virtual modem for Windows Fax Services. Therefore, during the initial configuration of Windows Fax & Scan, you\u2019ll want to select \"Connect to a fax modem\" instead of \"Connect to fax server\".","title":"Download HylaFSP"},{"location":"master/inbound-fax-routing/","text":"Configuring Inbound FAX Routing \u00b6 Web Interface DID Routes: \u00b6 Inbound FAX routing is easily configured the \"Configure DID/DTMF Routing\" section of the Admin Settings area in the Web Interface. By default, there are three DID groups configured. They are 1234 , 1321 , and 4321 . If a fax is sent to a non-existent DID group, then it will be stored in the \u201cCatch-All\u201d group. The admin account has access to view all faxes received in every DID group including the \u201cCatch-All\u201d group. The tech account only has access to view the faxes received on the 1321 and 4321 DID groups. The user account only has access to the 1234 DID group. Therefore, if you send a fax to 4321 , the users admin and tech will see the fax in the Inbox while user will not. If you send a fax to 2175 , only admin will be able to view the fax because it will be stored in the \u201cCatch-All\u201d group. You can create new DID groups and adjust user permissions in the Admin Settings area. Fax Dispatch \u00b6 If you'd like to perform an action (e.g. execute a script) when a fax is received, that can happen on in FaxDispatch FaxDispatch is sourced by bin/faxrcvd, which is executed by btgetty. Here are some things you can do with it: Email routing by CallerID, by DID, or by receiving device (example case statements for each type of routing are included). FaxDispatch sets the SENDTO variable in order to route faxes to emails. Similarly it sets FROMADDR. Sending the fax attachment as different types (i.e., TIFF instead of PDF) FaxDispatch sets the FILETYPE variable to pdf,tiff to manage this. Or to \"none\" to not attach anything at all. Or you can use TIFF instead of PDF for a specific destination, see below. Automatic printing Copying faxes to different directories (this is good for those who want backups or to send faxes to a different network share Adding faxes to the web interface. Set the TEMPLATE variable (or in FaxDispatch, add the variable, as it starts out not included in the file), to specify which email templates are used for notification Fax to Email using FaxDispatch \u00b6 By default your server will have the following examples in its FaxDispatch file. You can see examples of how to route your emails based on the Caller ID $CALLID1 or the DID Route $CALLID2 or the device the fax was recived on $DEVICE When using multiple analog lines, you can determine which port the fax number is connected to by running watch faxstat and then calling the fax numbers with your phone. FROMADDR = faxserver@example.com FILETYPE = pdf # By CallerID case \" $CALLID1 \" in 2125551234 ) SENDTO = jack@example.com,jill@example.com ;; # send to both jack and jill 2125553456 ) SENDTO = \"joe@example.com\" ; FILETYPE = tif ;; # joe wants TIFF instead of PDF * ) SENDTO = catchall@example.com ;; # send everything else here esac # By DID/DTMF case \" $CALLID2 \" in 6001 ) SENDTO = jack@example.com,jill@example.com ;; # send to both jack and jill 6002 ) SENDTO = \"joe@example.com\" ; FILETYPE = tif ;; # joe wants TIFF instead of PDF * ) SENDTO = catchall@example.com ;; # send everything else here esac # By Device case \" $DEVICE \" in ttyS4 ) SENDTO = john@example.com ;; # all faxes received on ttyS4 ttyS5 ) SENDTO = mary@example.com ;; # all faxes received on ttyS5 ttyS6 | ttyS7 ) SENDTO = will@example.com ;; # all faxes received on ttyS6 and ttyS7 esac Copying the FAX to a local directory \u00b6 To copy a fax in PDF format to another directory: DATE = $( date +%Y/%m ) TIFF2PDF = /usr/bin/tiff2pdf SHAREDIR = /media/smbshare if [ -f $FILE ] ; then mkdir -p $SHAREDIR / $DATE # cp $FILE $SHAREDIR/$DATE/$FILENAME.tif # Copy the fax with filename format DID-FILENAME.pdf $TIFF2PDF -o $SHAREDIR / $DATE / $CALLID2 - $FILENAME .pdf $FILE fi Note about copying faxes: If you want to back up every received fax, ideally your remote machine would connect to a Samba share on the HylaFAX server, instead of configuring the HylaFAX server to connect to and store faxes on a remote share because of eventual networking problems that might cause some faxes to not be copied over to the remote share. We recommend your systems pull from the HylaFAX server for an important reason: so that HylaFAX is guaranteed to be able to invoke all post-reception routines successfully, without reliance on external systems or file storage. HylaFAX's faxrcvd script only runs once, when the fax is received. If your remote filesystem was not mounted at the time it was run, the fax would fail to get copied over, and there would be no indication of any failure. So at least the very first copy HylaFAX does should be local. You can find a guide to setting up a samba in a later chapter, or on the tab to the left. Using LDAP/AD \u00b6 Connection to LDAP server must be set up first! See guide below for instructions: *Create a link to the LDAP doc Route the fax to email based on the DID listed for users in LDAP (or Active Directory): LDAPEMAIL = ` ldapsearch -LLL -x -D \"CN=Fax Server,OU=System Accounts,DC=Example,DC=com\" \\ -y /etc/ldap.secret \"facsimileTelephoneNumber=* $CALLID2 \" mail | grep \"^mail:\" | \\ cut -f 2 -d ' ' | awk '{ str1=str1 $0 \",\" }END{ print str1 }' ` if [ -n \" $LDAPEMAIL \" ] ; then SENDTO = $LDAPEMAIL fi You must update the LDAP connection parameters (ie: LDAP host, BaseDN, etc) in the command above. Printing Received Faxes \u00b6 Printing Received Faxes To install the CUPS print queue software, run: yum -y install cups system-config-printer systemctl start cups cupsctl --remote-admin Edit /etc/cups/cuspd.conf and add this as the first line: DefaultEncryption Never Under <Location /admin> , remove the line: Encryption Required If the HylaFAX server is not located on your same network, you must also execute the following command: # sed -i -e 's/Allow @LOCAL/Allow All/' /etc/cups/cupsd.conf Restart CUPS # systemctl restart cups Allow connections to CUPS through the local firewall: # firewall-cmd --zone=public --permanent --add-service=ipp # firewall-cmd --reload Afterwards, you can access the CUPS web interface by pointing your browser to port 631 of your hylafax server\u2019s IP address. For example: http://192.168.1.10:631 *Screenshot needed To add a printer, click on the Add Printer button and follow the prompts. CUPS will request that you login with the root account and the root password you specified during the Appliance installation. To print faxes as they arrive, add the following to etc/FaxDispatch: PRINTER = myprinter fax2ps $FILE | lpr -P $PRINTER Substitute myprinter for the actual printer name configured on your server. Barcode Decoding \u00b6 Barcode support is provided by the bardecode application located at /var/spool/hylafax/bin/bardecode . Supported barcode types include code39, code128, upca, upce, ean8, code25, ean13 and codabar. Example usage: bin/bardecode -t any -f $FILE Execute bin/bardecode for more information","title":"Inbound FAX Routing"},{"location":"master/inbound-fax-routing/#configuring-inbound-fax-routing","text":"","title":"Configuring Inbound FAX Routing"},{"location":"master/inbound-fax-routing/#web-interface-did-routes","text":"Inbound FAX routing is easily configured the \"Configure DID/DTMF Routing\" section of the Admin Settings area in the Web Interface. By default, there are three DID groups configured. They are 1234 , 1321 , and 4321 . If a fax is sent to a non-existent DID group, then it will be stored in the \u201cCatch-All\u201d group. The admin account has access to view all faxes received in every DID group including the \u201cCatch-All\u201d group. The tech account only has access to view the faxes received on the 1321 and 4321 DID groups. The user account only has access to the 1234 DID group. Therefore, if you send a fax to 4321 , the users admin and tech will see the fax in the Inbox while user will not. If you send a fax to 2175 , only admin will be able to view the fax because it will be stored in the \u201cCatch-All\u201d group. You can create new DID groups and adjust user permissions in the Admin Settings area.","title":"Web Interface DID Routes:"},{"location":"master/inbound-fax-routing/#fax-dispatch","text":"If you'd like to perform an action (e.g. execute a script) when a fax is received, that can happen on in FaxDispatch FaxDispatch is sourced by bin/faxrcvd, which is executed by btgetty. Here are some things you can do with it: Email routing by CallerID, by DID, or by receiving device (example case statements for each type of routing are included). FaxDispatch sets the SENDTO variable in order to route faxes to emails. Similarly it sets FROMADDR. Sending the fax attachment as different types (i.e., TIFF instead of PDF) FaxDispatch sets the FILETYPE variable to pdf,tiff to manage this. Or to \"none\" to not attach anything at all. Or you can use TIFF instead of PDF for a specific destination, see below. Automatic printing Copying faxes to different directories (this is good for those who want backups or to send faxes to a different network share Adding faxes to the web interface. Set the TEMPLATE variable (or in FaxDispatch, add the variable, as it starts out not included in the file), to specify which email templates are used for notification","title":"Fax Dispatch"},{"location":"master/inbound-fax-routing/#fax-to-email-using-faxdispatch","text":"By default your server will have the following examples in its FaxDispatch file. You can see examples of how to route your emails based on the Caller ID $CALLID1 or the DID Route $CALLID2 or the device the fax was recived on $DEVICE When using multiple analog lines, you can determine which port the fax number is connected to by running watch faxstat and then calling the fax numbers with your phone. FROMADDR = faxserver@example.com FILETYPE = pdf # By CallerID case \" $CALLID1 \" in 2125551234 ) SENDTO = jack@example.com,jill@example.com ;; # send to both jack and jill 2125553456 ) SENDTO = \"joe@example.com\" ; FILETYPE = tif ;; # joe wants TIFF instead of PDF * ) SENDTO = catchall@example.com ;; # send everything else here esac # By DID/DTMF case \" $CALLID2 \" in 6001 ) SENDTO = jack@example.com,jill@example.com ;; # send to both jack and jill 6002 ) SENDTO = \"joe@example.com\" ; FILETYPE = tif ;; # joe wants TIFF instead of PDF * ) SENDTO = catchall@example.com ;; # send everything else here esac # By Device case \" $DEVICE \" in ttyS4 ) SENDTO = john@example.com ;; # all faxes received on ttyS4 ttyS5 ) SENDTO = mary@example.com ;; # all faxes received on ttyS5 ttyS6 | ttyS7 ) SENDTO = will@example.com ;; # all faxes received on ttyS6 and ttyS7 esac","title":"Fax to Email using FaxDispatch"},{"location":"master/inbound-fax-routing/#copying-the-fax-to-a-local-directory","text":"To copy a fax in PDF format to another directory: DATE = $( date +%Y/%m ) TIFF2PDF = /usr/bin/tiff2pdf SHAREDIR = /media/smbshare if [ -f $FILE ] ; then mkdir -p $SHAREDIR / $DATE # cp $FILE $SHAREDIR/$DATE/$FILENAME.tif # Copy the fax with filename format DID-FILENAME.pdf $TIFF2PDF -o $SHAREDIR / $DATE / $CALLID2 - $FILENAME .pdf $FILE fi Note about copying faxes: If you want to back up every received fax, ideally your remote machine would connect to a Samba share on the HylaFAX server, instead of configuring the HylaFAX server to connect to and store faxes on a remote share because of eventual networking problems that might cause some faxes to not be copied over to the remote share. We recommend your systems pull from the HylaFAX server for an important reason: so that HylaFAX is guaranteed to be able to invoke all post-reception routines successfully, without reliance on external systems or file storage. HylaFAX's faxrcvd script only runs once, when the fax is received. If your remote filesystem was not mounted at the time it was run, the fax would fail to get copied over, and there would be no indication of any failure. So at least the very first copy HylaFAX does should be local. You can find a guide to setting up a samba in a later chapter, or on the tab to the left.","title":"Copying the FAX to a local directory"},{"location":"master/inbound-fax-routing/#using-ldapad","text":"Connection to LDAP server must be set up first! See guide below for instructions: *Create a link to the LDAP doc Route the fax to email based on the DID listed for users in LDAP (or Active Directory): LDAPEMAIL = ` ldapsearch -LLL -x -D \"CN=Fax Server,OU=System Accounts,DC=Example,DC=com\" \\ -y /etc/ldap.secret \"facsimileTelephoneNumber=* $CALLID2 \" mail | grep \"^mail:\" | \\ cut -f 2 -d ' ' | awk '{ str1=str1 $0 \",\" }END{ print str1 }' ` if [ -n \" $LDAPEMAIL \" ] ; then SENDTO = $LDAPEMAIL fi You must update the LDAP connection parameters (ie: LDAP host, BaseDN, etc) in the command above.","title":"Using LDAP/AD"},{"location":"master/inbound-fax-routing/#printing-received-faxes","text":"Printing Received Faxes To install the CUPS print queue software, run: yum -y install cups system-config-printer systemctl start cups cupsctl --remote-admin Edit /etc/cups/cuspd.conf and add this as the first line: DefaultEncryption Never Under <Location /admin> , remove the line: Encryption Required If the HylaFAX server is not located on your same network, you must also execute the following command: # sed -i -e 's/Allow @LOCAL/Allow All/' /etc/cups/cupsd.conf Restart CUPS # systemctl restart cups Allow connections to CUPS through the local firewall: # firewall-cmd --zone=public --permanent --add-service=ipp # firewall-cmd --reload Afterwards, you can access the CUPS web interface by pointing your browser to port 631 of your hylafax server\u2019s IP address. For example: http://192.168.1.10:631 *Screenshot needed To add a printer, click on the Add Printer button and follow the prompts. CUPS will request that you login with the root account and the root password you specified during the Appliance installation. To print faxes as they arrive, add the following to etc/FaxDispatch: PRINTER = myprinter fax2ps $FILE | lpr -P $PRINTER Substitute myprinter for the actual printer name configured on your server.","title":"Printing Received Faxes"},{"location":"master/inbound-fax-routing/#barcode-decoding","text":"Barcode support is provided by the bardecode application located at /var/spool/hylafax/bin/bardecode . Supported barcode types include code39, code128, upca, upce, ean8, code25, ean13 and codabar. Example usage: bin/bardecode -t any -f $FILE Execute bin/bardecode for more information","title":"Barcode Decoding"},{"location":"master/lang-date/","text":"Changing the Language and Date Format US format MONTH/DAY/YEAR EU Format DAY/MONTH/YEAR To make this change all you need to do is run the following command. systemctl edit hylafax-faxq.service And then add the following to the file [Service] Environment=\"LANG=de_DE.UTF-8\" After you add the above simply run service hylafax restart to make the change. Be sure to change the de_DE to whatever language you are trying to set it to. The above example was used to set a customers language to German. Another example is below of setting the language to French Canadian. [Service] Environment=\"LANG= fr_CA.UTF-8\" Be sure there are no spaces on the second line. If there are any the language change will not take. If you need to set this on an older version of CentOS you will need to make a few slight changes. Edit the file /etc/hylafax/wrapper.sh and add the following after changing the language to match what you are trying to change. LANG=de_DE.UTF-8 Then simply run service hylafax restart to make the change.","title":"Changing the Language and Date Format "},{"location":"master/ldap/","text":"LDAP authentication for Hylafax and the web interface To setup LDAP/Active Directory authentication on CentOS 7, using the following script: http://people.ifax.com/~david/scripts/setup-ldap.sh When that\u2019s complete, you can use the following utility for testing authentication with LDAP/AD: /var/www/fax/tools/testpamauth.php username password \u00b6 Keep in mind that an account must exist in the Web Interface already in order for the user to login after being authenticated over LDAP/AD. Accounts can be imported via the Admin Settings area of the Web Interface. Afterwards, add the following to FaxDispatch: SENDTO= ldapsearch -Hldap://192.168.15.4 -LLL -x -D \"CN=Fax Server,OU=System Accounts,DC=Example,DC=com\" -y /etc/ldap.secret \"facsimileTelephoneNumber=*$CALLID2\" mail You must update the LDAP connection parameters (ie: LDAP host, BaseDN, etc) in the command above. In FaxDispatch, you must make sure that the SENDTO variable is not being overwritten later on FaxDispatch or FaxDispatch.appliance. Let me know and I can login to your server and help you configure this. Place your ldap password in /etc/ldap.secret using the following commands: printf \"P@ssw0rd\" > /etc/ldap.secret chmod 0600 /etc/ldap.secret","title":"LDAP"},{"location":"master/ldap/#varwwwfaxtoolstestpamauthphp-username-password","text":"Keep in mind that an account must exist in the Web Interface already in order for the user to login after being authenticated over LDAP/AD. Accounts can be imported via the Admin Settings area of the Web Interface. Afterwards, add the following to FaxDispatch: SENDTO= ldapsearch -Hldap://192.168.15.4 -LLL -x -D \"CN=Fax Server,OU=System Accounts,DC=Example,DC=com\" -y /etc/ldap.secret \"facsimileTelephoneNumber=*$CALLID2\" mail You must update the LDAP connection parameters (ie: LDAP host, BaseDN, etc) in the command above. In FaxDispatch, you must make sure that the SENDTO variable is not being overwritten later on FaxDispatch or FaxDispatch.appliance. Let me know and I can login to your server and help you configure this. Place your ldap password in /etc/ldap.secret using the following commands: printf \"P@ssw0rd\" > /etc/ldap.secret chmod 0600 /etc/ldap.secret","title":"/var/www/fax/tools/testpamauth.php username password"},{"location":"master/license-activation/","text":"License Activation \u00b6 Appliance console Activation \u00b6 Your serial numbers can be easily activated via the Appliance console interface. From the \u201cAdvanced Options\u201d menu of the HylaFAX Enterprise Appliance console, select \u201cActivate License(s)\u201d in order to activate your appliance. Manual Activation \u00b6 To manually activate your permanent (HFEB,HFCB,HFCH) or evaluation (EVEB) HylaFAX Enterprise serial numbers, run: /var/spool/hylafax/ifax/bin/register --lmgrd-port 27000 --vendor-port 27059 [ Enter your license here ] Run /usr/sbin/lmstat to check the status of the licence server. If all went well, the output should look something like: [ root@localhost ~ ] # lmstat lmstat - Copyright ( c ) 1989 -2021 Flexera. All Rights Reserved. Flexible License Manager status on Mon 11 /22/2021 11 :37 License server status: 27000 @localhost.localdomain License file ( s ) on localhost.localdomain: /etc/ifax/ifax-1234567890123456-987654321098-EE60Base.lic:/etc/ifax/ifax-1234567890123456-987654321098-EE60Channels.lic:/etc/ifax/ifax-1234567890123456-987654321098-EE60HylaFSP.lic: localhost.localdomain: license server UP ( MASTER ) v11.18.0 Vendor daemon status ( on localhost.localdomain ) : ifax: UP v11.18.0 If you have an error, make sure that the fax server is able to lookup its own hostname in DNS and check /var/log/hylafax/lmgrd.log for details.","title":"License Activation"},{"location":"master/license-activation/#license-activation","text":"","title":"License Activation"},{"location":"master/license-activation/#appliance-console-activation","text":"Your serial numbers can be easily activated via the Appliance console interface. From the \u201cAdvanced Options\u201d menu of the HylaFAX Enterprise Appliance console, select \u201cActivate License(s)\u201d in order to activate your appliance.","title":"Appliance console Activation"},{"location":"master/license-activation/#manual-activation","text":"To manually activate your permanent (HFEB,HFCB,HFCH) or evaluation (EVEB) HylaFAX Enterprise serial numbers, run: /var/spool/hylafax/ifax/bin/register --lmgrd-port 27000 --vendor-port 27059 [ Enter your license here ] Run /usr/sbin/lmstat to check the status of the licence server. If all went well, the output should look something like: [ root@localhost ~ ] # lmstat lmstat - Copyright ( c ) 1989 -2021 Flexera. All Rights Reserved. Flexible License Manager status on Mon 11 /22/2021 11 :37 License server status: 27000 @localhost.localdomain License file ( s ) on localhost.localdomain: /etc/ifax/ifax-1234567890123456-987654321098-EE60Base.lic:/etc/ifax/ifax-1234567890123456-987654321098-EE60Channels.lic:/etc/ifax/ifax-1234567890123456-987654321098-EE60HylaFSP.lic: localhost.localdomain: license server UP ( MASTER ) v11.18.0 Vendor daemon status ( on localhost.localdomain ) : ifax: UP v11.18.0 If you have an error, make sure that the fax server is able to lookup its own hostname in DNS and check /var/log/hylafax/lmgrd.log for details.","title":"Manual Activation"},{"location":"master/maxdials-maxtries/","text":"MaxDials and MaxTries If you want to reduce the number of attempts that HylaFAX will make to dial a number that you have successfully dialed to before, then you'll want to tweak the MaxDials and MaxTries parameters. However, if you want to reduce the number of attempts that HylaFAX will make to dial an incorrect number (ie. a voice line), it would be best to use the JobRetryNoCarrier and JobRetryNoAnswer parameters instead. These parameters are used only when the destination number has not been successfully dialed before. MaxDials specifies the number of times to redial a number if the number was busy or no answer, etc, and should not be set too low. The default of 12 is reasonable, but some people lower it to 8 or 6. MaxTries specifies the number of attempts to communicate with a remote site and generally should be left as the default of 3 attempts. Please note that the Brooktrout will count a call against MaxTries as long as the call was answered while other modems will count against MaxTries only if carrier was established (ie. a fax machine answered the call). There is no default value for JobRetryNoCarrier and JobRetryNoAnswer, but users typically set them to 3 in order to avoid dialing voice lines 12 times. I believe voice destinations are most frequently classified as No Carrier. You can test the No Carrier settings by faxing your cell phone number, answering, and talking to your fax server when it calls. Please note that MaxDials and MaxTries should be configured only in /var/spool/hylafax/etc/config while the JobRetry* parameters should be placed in /var/spool/hylafax/etc/CONFIG/boston If you update the per-device configuration files (including Appliance users), execute the following to gracefully restart the devices: for i in /var/spool/hylafax/FIFO.*; do echo Q > $i; done The \"echo Q\" will restart them gracefully, meaning that if they are receiving a fax, they will restart only after they're done. Setting these in Job Control MaxDials and MaxTries can be set dynamically in Job Control, but you need the \"SetJobParam\" function for it to fly. (See the page on Job Control for more detail.) AND you need to specify them as lower case, i.e., not \"MaxDials\" but \"maxdials\"! See below: DEST= \\((GetJobParam number) case \"\\) DEST\" in *6102469672) SetJobParam maxdials 3; SetJobParam maxtries 1;; esac Text And a few timers - how long do we wait after a try In man hylafax-config there are a few other timers that default to five minutes (300 seconds), and you can set these in the individual config.bostonXX files: JobReqNoAnswer: 120 JobReqNoCarrier: 120 JobReqOther: 120 JobReqError: 120","title":"MaxDials and MaxTries"},{"location":"master/odbc/","text":"HylaFAX Enterprise Guide for ODBC \u00b6 Preface \u00b6 HylaFAX Enterprise will utilize an ODBC connection for storing data regarding both inbound and outbound faxing. In the case of inbound faxing, it is possible to route incoming faxes using database rows which, presumably, some automated provisioning agent would be adding/populating. In the case of outbound faxing, ODBC usage enables a data warehouse for reporting on fax traffic including final transmission status, bitrate, duration of transmission, the receiver\u2019s station identifier, etc. With clever use of stored procedures and triggers some business logic can added to both transmission and reception of faxes, and this is yet another point of integration in addition to the client/server protocol that some customers use to get data out of HylaFAX. For instance, if a received fax needs to be injected into some customer-facing application, you could execute a stored procedure to capture the fax (which can be stored in the database) and move it to a new table/schema. NOTE : This guide will explain how to use PostgreSQL and MariaDB on CentOS 7 64-bit with HylaFAX Enterprise. Configure ODBC Database Server \u00b6 PostgreSQL installation \u00b6 # yum install postgresql-server postgresql-odbc # postgresql-setup initdb # systemctl enable postgresql Configure PostgreSQL \u00b6 Edit /var/lib/pgsql/data/pg_hba.conf : Add the authentication line BEFORE the default ident lines: local hylafax hylafax md5 host hylafax hylafax 127 .0.0.1/32 md5 host hylafax hylafax ::1/128 md5 If you need network access, use something like: host hylafax hylafax 192 .168.1.0/24 md5 The file is well commented. Edit /var/lib/pgsql/data/postgresql.conf Important variables are: listen_addresses = 'localhost' max_connections = 512 shared_buffers = 1024 max_connections needed are ( minimum ) : 2 * N + 1 + n + H where: N is the number of channels 1 is for faxq n is the number of simultaneous faxq job preparations ( n < = N ) H is the number of simultaneous hfaxd connections These minimum settings do not take into account any other necessary connections from non-hylafax related processes (like any other tools/scripts, or anything that faxrcvd might do, etc). Start PostgreSQL \u00b6 # systemctl start postgresql Create HylaFAX User/Database for PostgreSQL \u00b6 # su - postgres $ createdb hylafax $ createuser -A -D -P hylafax Password: ee $ createlang plpgsql hylafax $ exit Import HylaFAX Schema \u00b6 # psql -U hylafax hylafax < /var/spool/hylafax/ifax/sql/postgres.sql Setup ODBC \u00b6 Edit /etc/odbc.ini [ hylafax ] Driver = /usr/lib64/psqlodbc.so Database = hylafax Server = localhost UserName = hylafax Password = ee ReadOnly = No Debug = 0 CommLog = 0 UseServerSidePrepare = 0 MariaDB installation \u00b6 # yum install mariadb mariadb-server mysql-connector-odbc # systemctl start mariadb # systemctl enable mariadb Create HylaFAX User/Database on MariaDB \u00b6 # mysqladmin create hylafax # mysql mysql Execute these SQL queries: GRANT ALL PRIVILEGES ON hylafax.* TO 'hylafax' @ 'localhost' IDENTIFIED BY 'ee' ; If you need network access, use something like: GRANT ALL PRIVILEGES ON hylafax.* TO 'hylafax' @ '209.166.32.52' IDENTIFIED BY 'ee' ; Update privileges: FLUSH PRIVILEGES ; exit ; Import HylaFAX Schema \u00b6 # mysql -uhylafax -pee hylafax < /var/spool/hylafax/ifax/sql/mysql.sql Setup ODBC \u00b6 Edit /etc/odbc.ini [ hylafax ] Driver = /usr/lib64/libmyodbc5.so Database = hylafax Server = localhost User = hylafax Password = ee ; ReadOnly = No Test the ODBC Connection \u00b6 Test the connection using isql hylafax [ root@hylafax ~ ] # isql hylafax +----------------------------------------+ | Connected! | | | | sql-statement | | help [ tablename ] | | quit | | | +----------------------------------------+ SQL> SELECT count ( * ) FROM hylafax_statements ; +-----------------+ | count | +-----------------+ | 13 | +-----------------+ SQLRowCount returns 1 1 rows fetched SQL> quit Configure HylaFAX Enterprise with ODBC \u00b6 Create /var/spool/hylafax/etc/CONFIG/database with the following content: DataInitialize: \"odbc: dsn=hylafax\" #DataOption: \"odbc: username=hylafax\" #DataOption: \"odbc: password=ee\" DataSource: \"FaxRecvInfo: odbc\" DataSource: \"FaxAcctInfo: odbc\" Afterwards, configure your modem devices to include that file. For example, in /var/spool/hylafax/etc/CONFIG/boston add: Include: etc/CONFIG/database Next, restart faxgetty and/or btgetty proccesses in order to connect them to ODBC: # for i in /var/spool/hylafax/FIFO.*; do echo Q > $i; done If there is an ODBC connection problem, the faxgetty/btgetty processes will fail to start properly. You can verify whether there were errors while connecting to the database by executing: # grep -i odbc /var/log/messages If HylaFAX is having difficulty connecting to ODBC, try uncommenting the 'DataOption' lines above. Should you need to disable ODBC, simply comment out the Include line you added above. Retrieving Data from ODBC \u00b6 Here are sample SQL queries for retrieving records from the 'communication' table: SELECT tstart , command , commid , jobid , mailaddr , dest , csi , npages , status FROM communication WHERE dest = '12155558774' ; SELECT tstart , commid , device , jobid , npages , status FROM communication ORDER BY tstart DESC LIMIT 40 ; A description of each column can be found in the xferfaxlog manpage. Populating the Database \u00b6 You can use the xferfaxlog2db.php script from http://people.ifax.com/~david/scripts/ to export your xferfaxlog data into the ODBC database. Only records not currently available in the database will be created. Checking a job\u2019s final status \u00b6 The HylaFAX job 'status' is available in the 'status' column of the 'communication' table. On success, the status field will be empty. A call that ended with an error will report the error in the 'status' column. Please note that the /var/spool/hylafax/etc/xferfaxlog data and the 'communication' database table contain call detail records. If you want to know the final status of a job, it\u2019s better to add that column to the database and then update it via the FaxNotify script. For example, you\u2019d add the following to /var/spool/hylafax/etc/FaxNotify : # Add final status (e.g. 'done', 'failed', etc) to the communication table # See `man notify` for list of statuses DB = hylafax USER = hylafax PASS = ee case \" $WHY \" in blocked ) ;; requeued ) ;; * ) echo \"UPDATE communication SET finalstatus=' $WHY ' WHERE commid = ' $COMMID '\" | isql $DB $USER $PASS ;; esac You must apply the following schema change for both PostgreSQL and MariaDB: ALTER TABLE communication ADD finalstatus VARCHAR ( 20 ) DEFAULT NULL ; You must also apply the following schema change for MariaDB: ALTER TABLE communication CHANGE tstart tstart TIMESTAMP DEFAULT CURRENT_TIMESTAMP ; Once you\u2019ve applied these changes, you\u2019ll be able to query the database regarding jobs where the finalstatus is not null and get the true final status of the job. SELECT * FROM communication WHERE command = 'SEND' AND finalstatus is not null ; You can use the following queries to retroactively set the finalstatus column: UPDATE communication SET finalstatus = 'done' WHERE command = 'SEND' AND finalstatus is null AND status is null ; UPDATE communication SET finalstatus = 'failed' WHERE command = 'SEND' AND finalstatus is null AND status like '%too many%' ;","title":"ODBC"},{"location":"master/odbc/#hylafax-enterprise-guide-for-odbc","text":"","title":"HylaFAX Enterprise Guide for ODBC"},{"location":"master/odbc/#preface","text":"HylaFAX Enterprise will utilize an ODBC connection for storing data regarding both inbound and outbound faxing. In the case of inbound faxing, it is possible to route incoming faxes using database rows which, presumably, some automated provisioning agent would be adding/populating. In the case of outbound faxing, ODBC usage enables a data warehouse for reporting on fax traffic including final transmission status, bitrate, duration of transmission, the receiver\u2019s station identifier, etc. With clever use of stored procedures and triggers some business logic can added to both transmission and reception of faxes, and this is yet another point of integration in addition to the client/server protocol that some customers use to get data out of HylaFAX. For instance, if a received fax needs to be injected into some customer-facing application, you could execute a stored procedure to capture the fax (which can be stored in the database) and move it to a new table/schema. NOTE : This guide will explain how to use PostgreSQL and MariaDB on CentOS 7 64-bit with HylaFAX Enterprise.","title":"Preface"},{"location":"master/odbc/#configure-odbc-database-server","text":"","title":"Configure ODBC Database Server"},{"location":"master/odbc/#postgresql-installation","text":"# yum install postgresql-server postgresql-odbc # postgresql-setup initdb # systemctl enable postgresql","title":"PostgreSQL installation"},{"location":"master/odbc/#configure-postgresql","text":"Edit /var/lib/pgsql/data/pg_hba.conf : Add the authentication line BEFORE the default ident lines: local hylafax hylafax md5 host hylafax hylafax 127 .0.0.1/32 md5 host hylafax hylafax ::1/128 md5 If you need network access, use something like: host hylafax hylafax 192 .168.1.0/24 md5 The file is well commented. Edit /var/lib/pgsql/data/postgresql.conf Important variables are: listen_addresses = 'localhost' max_connections = 512 shared_buffers = 1024 max_connections needed are ( minimum ) : 2 * N + 1 + n + H where: N is the number of channels 1 is for faxq n is the number of simultaneous faxq job preparations ( n < = N ) H is the number of simultaneous hfaxd connections These minimum settings do not take into account any other necessary connections from non-hylafax related processes (like any other tools/scripts, or anything that faxrcvd might do, etc).","title":"Configure PostgreSQL"},{"location":"master/odbc/#start-postgresql","text":"# systemctl start postgresql","title":"Start PostgreSQL"},{"location":"master/odbc/#create-hylafax-userdatabase-for-postgresql","text":"# su - postgres $ createdb hylafax $ createuser -A -D -P hylafax Password: ee $ createlang plpgsql hylafax $ exit","title":"Create HylaFAX User/Database for PostgreSQL"},{"location":"master/odbc/#import-hylafax-schema","text":"# psql -U hylafax hylafax < /var/spool/hylafax/ifax/sql/postgres.sql","title":"Import HylaFAX Schema"},{"location":"master/odbc/#setup-odbc","text":"Edit /etc/odbc.ini [ hylafax ] Driver = /usr/lib64/psqlodbc.so Database = hylafax Server = localhost UserName = hylafax Password = ee ReadOnly = No Debug = 0 CommLog = 0 UseServerSidePrepare = 0","title":"Setup ODBC"},{"location":"master/odbc/#mariadb-installation","text":"# yum install mariadb mariadb-server mysql-connector-odbc # systemctl start mariadb # systemctl enable mariadb","title":"MariaDB installation"},{"location":"master/odbc/#create-hylafax-userdatabase-on-mariadb","text":"# mysqladmin create hylafax # mysql mysql Execute these SQL queries: GRANT ALL PRIVILEGES ON hylafax.* TO 'hylafax' @ 'localhost' IDENTIFIED BY 'ee' ; If you need network access, use something like: GRANT ALL PRIVILEGES ON hylafax.* TO 'hylafax' @ '209.166.32.52' IDENTIFIED BY 'ee' ; Update privileges: FLUSH PRIVILEGES ; exit ;","title":"Create HylaFAX User/Database on MariaDB"},{"location":"master/odbc/#import-hylafax-schema_1","text":"# mysql -uhylafax -pee hylafax < /var/spool/hylafax/ifax/sql/mysql.sql","title":"Import HylaFAX Schema"},{"location":"master/odbc/#setup-odbc_1","text":"Edit /etc/odbc.ini [ hylafax ] Driver = /usr/lib64/libmyodbc5.so Database = hylafax Server = localhost User = hylafax Password = ee ; ReadOnly = No","title":"Setup ODBC"},{"location":"master/odbc/#test-the-odbc-connection","text":"Test the connection using isql hylafax [ root@hylafax ~ ] # isql hylafax +----------------------------------------+ | Connected! | | | | sql-statement | | help [ tablename ] | | quit | | | +----------------------------------------+ SQL> SELECT count ( * ) FROM hylafax_statements ; +-----------------+ | count | +-----------------+ | 13 | +-----------------+ SQLRowCount returns 1 1 rows fetched SQL> quit","title":"Test the ODBC Connection"},{"location":"master/odbc/#configure-hylafax-enterprise-with-odbc","text":"Create /var/spool/hylafax/etc/CONFIG/database with the following content: DataInitialize: \"odbc: dsn=hylafax\" #DataOption: \"odbc: username=hylafax\" #DataOption: \"odbc: password=ee\" DataSource: \"FaxRecvInfo: odbc\" DataSource: \"FaxAcctInfo: odbc\" Afterwards, configure your modem devices to include that file. For example, in /var/spool/hylafax/etc/CONFIG/boston add: Include: etc/CONFIG/database Next, restart faxgetty and/or btgetty proccesses in order to connect them to ODBC: # for i in /var/spool/hylafax/FIFO.*; do echo Q > $i; done If there is an ODBC connection problem, the faxgetty/btgetty processes will fail to start properly. You can verify whether there were errors while connecting to the database by executing: # grep -i odbc /var/log/messages If HylaFAX is having difficulty connecting to ODBC, try uncommenting the 'DataOption' lines above. Should you need to disable ODBC, simply comment out the Include line you added above.","title":"Configure HylaFAX Enterprise with ODBC"},{"location":"master/odbc/#retrieving-data-from-odbc","text":"Here are sample SQL queries for retrieving records from the 'communication' table: SELECT tstart , command , commid , jobid , mailaddr , dest , csi , npages , status FROM communication WHERE dest = '12155558774' ; SELECT tstart , commid , device , jobid , npages , status FROM communication ORDER BY tstart DESC LIMIT 40 ; A description of each column can be found in the xferfaxlog manpage.","title":"Retrieving Data from ODBC"},{"location":"master/odbc/#populating-the-database","text":"You can use the xferfaxlog2db.php script from http://people.ifax.com/~david/scripts/ to export your xferfaxlog data into the ODBC database. Only records not currently available in the database will be created.","title":"Populating the Database"},{"location":"master/odbc/#checking-a-jobs-final-status","text":"The HylaFAX job 'status' is available in the 'status' column of the 'communication' table. On success, the status field will be empty. A call that ended with an error will report the error in the 'status' column. Please note that the /var/spool/hylafax/etc/xferfaxlog data and the 'communication' database table contain call detail records. If you want to know the final status of a job, it\u2019s better to add that column to the database and then update it via the FaxNotify script. For example, you\u2019d add the following to /var/spool/hylafax/etc/FaxNotify : # Add final status (e.g. 'done', 'failed', etc) to the communication table # See `man notify` for list of statuses DB = hylafax USER = hylafax PASS = ee case \" $WHY \" in blocked ) ;; requeued ) ;; * ) echo \"UPDATE communication SET finalstatus=' $WHY ' WHERE commid = ' $COMMID '\" | isql $DB $USER $PASS ;; esac You must apply the following schema change for both PostgreSQL and MariaDB: ALTER TABLE communication ADD finalstatus VARCHAR ( 20 ) DEFAULT NULL ; You must also apply the following schema change for MariaDB: ALTER TABLE communication CHANGE tstart tstart TIMESTAMP DEFAULT CURRENT_TIMESTAMP ; Once you\u2019ve applied these changes, you\u2019ll be able to query the database regarding jobs where the finalstatus is not null and get the true final status of the job. SELECT * FROM communication WHERE command = 'SEND' AND finalstatus is not null ; You can use the following queries to retroactively set the finalstatus column: UPDATE communication SET finalstatus = 'done' WHERE command = 'SEND' AND finalstatus is null AND status is null ; UPDATE communication SET finalstatus = 'failed' WHERE command = 'SEND' AND finalstatus is null AND status like '%too many%' ;","title":"Checking a job\u2019s final status"},{"location":"master/overview/","text":"The recommended method for installing HylaFAX Enterprise is by downloading the Appliance ISO and installing that on a new bare metal or virtual machine. The Appliance ISO is based on CentOS 7 64-bit, and can be downloaded at the following URL and then burned to disc, flash drive or used directly with your virtual machine: Download Here Minimum Hardware requirements : \u00b6 Intel Core 2.8 GHz or higher 2 GB RAM 100 GB Hard drive Operating Systems supported : \u00b6 RedHat Enterprise Linux 7 (64-bit) CentOS Linux 7 (64-bit) Oracle Enterprise Linux 7 (64-bit) Manual Installation : \u00b6 HylaFAX Enterprise can be manually installed using the iFAX Solutions YUM repository on a minimal install of RHEL 7, CentOS 7, or Oracle Enterprise Linux 7. Use the following commands to perform the install: rpm -ivh http://repo.ifax.com/yum/ee-6.3/ifax-ee-6.3.rpm yum install epel-release yum update reboot yum install hylafax-enterprise-appliance systemctl start hylafax-enterprise-appliance /usr/sbin/attach-console Verify Download: iFAX Solutions PGP key Afterwards, follow the Appliance Quickstart Guide for the initial setup procedure.","title":"Overview"},{"location":"master/overview/#minimum-hardware-requirements","text":"Intel Core 2.8 GHz or higher 2 GB RAM 100 GB Hard drive","title":"Minimum Hardware requirements:"},{"location":"master/overview/#operating-systems-supported","text":"RedHat Enterprise Linux 7 (64-bit) CentOS Linux 7 (64-bit) Oracle Enterprise Linux 7 (64-bit)","title":"Operating Systems supported:"},{"location":"master/overview/#manual-installation","text":"HylaFAX Enterprise can be manually installed using the iFAX Solutions YUM repository on a minimal install of RHEL 7, CentOS 7, or Oracle Enterprise Linux 7. Use the following commands to perform the install: rpm -ivh http://repo.ifax.com/yum/ee-6.3/ifax-ee-6.3.rpm yum install epel-release yum update reboot yum install hylafax-enterprise-appliance systemctl start hylafax-enterprise-appliance /usr/sbin/attach-console Verify Download: iFAX Solutions PGP key Afterwards, follow the Appliance Quickstart Guide for the initial setup procedure.","title":"Manual Installation:"},{"location":"master/recv-xferfaxstats/","text":"The command \"xferfaxstats\" (and a similar \"recvstats\" for incoming) will summarize the stats from the call log /var/spool/hylafax/etc/xferfaxlog. When you just run xferfaxstats with no additional parameters, it runs on the current xferfaxlog file - which is rotated on the 1 st of every month. The output might look something like this (on this example server, one user did almost all the faxing): [root@fax01 etc]# xferfaxstats Sender Pages Time Pg/min Errs TypRate TypData faxuser@fax01 (faxuser) 481447 5204:07:34 1.5 8570 14400 2-D MMR faxuserb@fax01 (faxuserb) 12 5:58 2.0 0 14400 2-D MMR faxuserc@fax01 (faxuserc) 6 2:59 2.0 0 14400 2-D MMR faxuserd@fax01 (faxuserd) 10 7:03 1.4 0 14400 2-D MMR Total 481475 5204:23:34 1.5 8570 You can uncompress earlier xferfaxlogs - there are three months worth of compressed logs in /var/spool/hylafax/etc - and run those through xferfaxstats similarly. For example, this would get you last months's outgoing stats: cd /var/spool/hylafax/etc gunzip xferfaxlog.1.gz xferfaxstats xferfaxlog.1 Afterwards, compress the log file again so that it will go back into the regular rotation management: gzip xferfaxlog.1 XFERFAXSTATS OPTIONS \u2212age days Show information only for the facsimile transmitted in the last specified number of days. \u2212csi* Sort output by the remote party\u2019s CSI. \u2212dest* Sort output by the phone number called. \u2212dev* Sort output by the output device (i.e. modem) used. \u2212format Sort output by the negotiated data format. \u2212job* Sort output by client-specified job tag identifiers. \u2212nomap Do not perform the account name mapping by which statistics for the \u2018\u2018root\u2019\u2019 and \u2018\u2018guest\u2019\u2019 accounts are merged and leading hostname part of domain names are stripped. This is the default behavior. \u2212map Perform the account name mapping by which statistics for the \u2018\u2018root\u2019\u2019 and \u2018\u2018guest\u2019\u2019 accounts are merged and leading hostname part of domain names are stripped. \u2212send* Sort output by sender\u2019s account name (default). \u2212since time Show information only for the facsimile transmitted since the specified time; where time is of the form \u2018\u2018MM/DD/YY HH:MM\u2019\u2019 (the date(1) format string %D %H:%M). \u2212end time Show information only for the facsimile transmitted before the specified time; where time is of the same form as since. \u2212speed Sort output by the signalling rate. RECVSTATS OPTIONS \u2212age days Show information only for the facsimile received in the last specified number of days. \u2212csi* Sort output by caller\u2019s CSI. \u2212cidname Sort output by CIDName \u2212cidnumber Sort output by CIDNumber \u2212format Sort output by data format. \u2212send* Sort output by sender (i.e. caller\u2019s CSI ). \u2212speed Sort output by signalling rate. \u2212since time Show information only for the facsimile received since the specified time; where time is of the form \u2018\u2018MM/DD/YY HH:MM\u2019\u2019 (the date(1) format string %D %H:%M). \u2212end time Show information only for the facsimile received before the specified time; where time is of the same form as since.","title":"RECV and Xferfaxstats"},{"location":"master/samba/","text":"Here's how to set up a locally-shared directory on a HylaFAX Enterprise server and to copy incoming faxes to it. 1) Install samba, if it isn't installed already yum install samba samba-common 2) Create /smbshare (it doesn't have to be called that. This could be any name, anywhere on a file system where a mount point can live) and set it to be owned by the user \"hylafax\". mkdir /smbshare chown hylafax /smbshare 3) Edit the Samba configuration in /etc/samba/smb.conf. Set a workgroup and server string (near the top of this file), as desired. Near the bottom of the file are Share Definitions. Add an entry for the new directory to be shared, for example: FAX share, added 6/15/2020 \u00b6 [smbshare] comment = Fax Share path = /smbshare browseable = yes guest ok = yes read only = no create mask = 0755 force user = hylafax force group = hylafax 4) Tell the system to start the samba service on boot systemctl enable smb 5) Start the samba service systemctl start smb 6) To verify things, at this point you can run testparm which shows the basic Samba configuration - and its service definitions should include the new share definition. 6a) Can't browse the share without auth? Set up a user for user-based authentication. From the Linux command line, create a local userid and set a password to access those users: useradd testuser passwd testpass Then set the samba user and set a password for it, with \"smbpasswd\": smbpasswd -a testuser Then enable that userid, with the command: smbpasswd -e testuser 7) Set up SELinux and Firewall chcon -R -t samba_share_t /path/to/dir Or if this is a home directory: setsebool -P samba_enable_home_dirs on firewall-cmd --add-service=samba --permanent 8) Configure FaxDispatch to copy incoming faxes to that share - OR - configure \"Copy Path\" in DID Routing/Sender Routing in the Web Interface. 8a) If you're using FaxDispatch, you can pretty much un-comment the example code to test this. If you've used a different name than \"smbshare\", you'll want to edit that name. 8b) If you're using the Web Interface, \"Copy Path\" is a field to specify a full directory path to where faxes for that DID/Sender should be copied. 9) Send yourself a fax and check that it's saved to the new share.","title":"Samba Share"},{"location":"master/samba/#fax-share-added-6152020","text":"[smbshare] comment = Fax Share path = /smbshare browseable = yes guest ok = yes read only = no create mask = 0755 force user = hylafax force group = hylafax 4) Tell the system to start the samba service on boot systemctl enable smb 5) Start the samba service systemctl start smb 6) To verify things, at this point you can run testparm which shows the basic Samba configuration - and its service definitions should include the new share definition. 6a) Can't browse the share without auth? Set up a user for user-based authentication. From the Linux command line, create a local userid and set a password to access those users: useradd testuser passwd testpass Then set the samba user and set a password for it, with \"smbpasswd\": smbpasswd -a testuser Then enable that userid, with the command: smbpasswd -e testuser 7) Set up SELinux and Firewall chcon -R -t samba_share_t /path/to/dir Or if this is a home directory: setsebool -P samba_enable_home_dirs on firewall-cmd --add-service=samba --permanent 8) Configure FaxDispatch to copy incoming faxes to that share - OR - configure \"Copy Path\" in DID Routing/Sender Routing in the Web Interface. 8a) If you're using FaxDispatch, you can pretty much un-comment the example code to test this. If you've used a different name than \"smbshare\", you'll want to edit that name. 8b) If you're using the Web Interface, \"Copy Path\" is a field to specify a full directory path to where faxes for that DID/Sender should be copied. 9) Send yourself a fax and check that it's saved to the new share.","title":"FAX share, added 6/15/2020"},{"location":"master/sending-faxes/","text":"Sending Faxes \u00b6 sendfax \u00b6 HylaFAX includes a command line program called sendfax for sending faxes. Typical usage would be something like: $ sendfax -f \"myname@mydomain.com\" -R -r \"faxsubject\" -c \"coverpage comments\" -x \"Recipient\u2019s company\" -d \"Recipient@1234567\" tofax.pdf where myname@mydomain.com is a valid e-mail address for the sender, 1234567 is the number where to fax, and tofax.pdf is the image file to be faxed. Standard HylaFAX-compatible file formats are ASCII, TIFF, PostScript, and PDF. Be aware that sendfax is capable of handling multiple -d options and that only the options that precede it apply to that instance of the -d. In most cases the -d option is the last option that should be used. See the sendfax manpage for more information. man sendfax sendfax options: \u00b6 Priorities \u00b6 -P Ex: sendfax -P 63 ... Priority Assign the specified scheduling priority to subsequent jobs. A priority is an integer value in the range [0-255]. Lower values result in higher priority processing. By default, each job is assigned 127 for an initial scheduling priority. If a job\u2019s priority is greater than bulk faxes then the job\u2019s priority is raised (numerically lowered) for each failed attempt to transmit so that retransmit attempts are done ahead of newly submitted jobs. In the case of bulk faxes (numerically higher than 190), then the job\u2019s priority is lowered (numerically raised) for each failed attempt to transmit so that the whole of the bulk-queued jobs will be attempted before any are retried. The priority may also be specified as one of the following symbolic names: default or normal (127), bulk or junk (191), low (190), or high (63). Compression \u00b6 -1 Ex: sendfax -1 ... Transmit facsimile documents using 1-D MH compression. By default HylaFAX will use the optimal compression scheme supported by the transmitting modem and receiving facsimile device. -2 Ex: sendfax -2 ... Transmit facsimile documents using 2-D MR compression, if possible. By default HylaFAX will use the optimal compression scheme supported by the transmitting modem and receiving facsimile device. -3 Ex: sendfax -3 ... Transmit facsimile documents using 2-D MMR compression, if possible. By default HylaFAX will use the optimal compression scheme supported by the transmitting modem and receiving facsimile device. Speed \u00b6 -b speed Ex: sendfax -b 14400 ... Transmit facsimile documents using a signalling rate that is constrained to be at least speed bits/second. If the specified speed is greater than the transmitting modem or receiver is capable of, it is reduced to the highest possible speed both devices support. If a negotiated signalling rate greater than or equal to speed cannot be negotiated then the job is aborted. Possible speeds are: 2400, 4800, 7200, 9600, 12000, 14400, 16800, 19200, 21600, 24000, 26400, 28800, 31200, and 33600. By default Hyla FAX will use the fastest possible rate supported by the transmitting modem and receiving facsimile device. -B speed Ex: sendfax -B 2400 ... Try to transmit facsimile documents using the desired signalling rate. Possible speeds are: 2400, 4800, 7200, 9600, 12000, 14400, 16800, 19200, 21600, 24000, 26400, 28800, 31200, and 33600. If the specified speed is greater than the transmitting modem or receiver is capable of, it is reduced to the highest possible speed both devices support. By default Hyla FAX will use the fastest possible rate supported by the transmitting modem and receiving facsimile device (unless restricted by other server configuration); this option can be used to reduce the speed. Note that international calls are frequently more reliable when transmissions are restricted to 9600 bits/second. For Class 1/1.0 devices, if the specified speed is not greater than 14400 then V.34 will not be attempted, and if the specified speed is 9600 or 7200 then V.29 will be assumed in lieu of V.17. Caller ID /tsi \u00b6 -S Ex: sendfax -S 1234567890 ... Pass tsi to the server as the suggested sender identification to be used, for example, in tagline imaging and fax protocol. Use specific modem \u00b6 -h modem@localhost Ex: sendfax -h boston00@localhost ... Tries and Max dials \u00b6 Create a page for deeper explination of both -t tries Ex: sendfax -t 6 ... Make no more than tries attempts to send the facsimile. (A try is a call in which carrier is established and the facsimile protocol is commenced; this is contrasted with a call attempt that might have failed because the line was busy.) Without specifying a \"tries\" value to the server Hyla FAX will, with some exceptions, make an unlimited number of attempts to completely send the facsimile before the kill time expires. (The exceptions are that Hyla FAX will terminate a job if 3 consecutive attempts to send a particular page fail, or if it appears the receiver is not a facsimile machine.) Use ''-1'' to indicate that no tries value should be specified to the server. -T maxdials Ex: sendfax -T 4 ... Make no more than maxdials calls in attempting to send the facsimile. By default, HylaFAX will redial 12 times before killing a job. Use ''-1'' to indicate that no maxdials value should be specified to the server. Custom Client Applications \u00b6 Should you desire to write your own client application for submitting faxes to HylaFAX, below are sample applications in .NET and Java: \u2022 .NET sample client http://people.ifax.com/~david/dotnetsample.zip \u2022 Java sample client http://people.ifax.com/~david/javasample.zip Web Interface \u00b6 add link to web interface doc Email-to-Fax \u00b6 Email to FAX is simply a matter of Postfix receiving an email and handing it off to the faxmail program. Postfix is the email server that receives the email, and faxmail is a program included with HylaFAX for processing email messages and submitting them to HylaFAX for faxing. In the \"Configuring Mail\" area of the HylaFAX Enterprise Appliance console, you can set up Email to FAX support. To configure Email to FAX support, enter the domain name that you intend to use into the \u201cFax Domain\u201d field (ie. fax.example.com) and save your changes. Keep in mind that your mail server must be able to lookup the Fax Domain in your network's DNS in order to deliver emails to the HylaFAX Enterprise server. Next, send the email by addressing the recipient using the \"FAXNUMBER@fax.example.com\" format where FAXNUMBER is the actual fax number. If the job was successfully added to the HylaFAX queue, you'll see it in the Outbox of web interface and in the output of \"faxstat -s\". Email-to-Fax tweaks: \u00b6 Increase postfix message size limit \u00b6 To review the current maximum message size limit, run: postconf message_size_limit To increase the max message size limit, run: postconf -e message_size_limit = 20480000 postfix reload Multiple Fax Domains \u00b6 To set this up you will need to edit the postfix configration file main.cf located at /etc/postfix/ . At the bottom of this file is the variable relay_domains . Add your new domains to that variable separated by a comma. relay_domains = faxserver.example.com, faxserver.test.com, faxserver.ifax.com In the file virtual_alias-fax located at /etc/postfix/ , add a line at the bottom for each new domain in this style (this would be to add \"fax.newdomain.com\" as an email-to-FAX domain: /^ ([ + ] ? [ 0 -9*#.- ] + ) @fax \\. newdomain \\. com$/ $1 @fax.localhost Finally reload the postfix configuration: postfix reload Ignore Email Body \u00b6 If you would like to ignore the email body of an Email to FAX message, execute the following command: ln -s /bin/true /usr/sbin/faxmail/text/plain That file tells faxmail to ignore \"text/plain\" email attachments, which is what the email body consists of. Simply delete /usr/sbin/faxmail/text/plain and faxmail will send the email body in addition to any other plain text files in the email to HylaFAX for faxing. Disable Email Headers \u00b6 Create /etc/hylafax/faxmail.conf with the following content to disable the email headers from appearing in the fax: AutoCoverPage: false TextPointSize: 12pt Headers: clear MailUser: faxmail TrimText: yes Disable Cover Pages \u00b6 Create /etc/hylafax/faxmail.conf with the following content to disable the email headers from appearing in the fax: AutoCoverPage: false TextPointSize: 12pt Headers: clear MailUser: faxmail TrimText: yes Modem Control \u00b6 Specifying Default Outbound Devices \u00b6 You can use the ModemReadyState parameter in the /var/spool/hylafax/etc/config.bostonXX files to control whether or not the device is assigned to outbound jobs. For example, if you want to dedicate boston00 to boston01 for receiving faxes only (thus allowing boston02-07 to both send and receive faxes), then you would add the following setting to files config.boston00 and config.boston01 : ModemReadyState: D That would tell HylaFAX not to use boston00 and boston01 for outbound jobs. For details, please see the hylafax-config manpage. Afterward, restart the affected btgettys so that they immediately reload their configuration: faxquit boston00; faxquit boston01 -or- for i in /var/spool/hylafax/FIFO.boston0[0-1]; do echo Q > $i; done Modem Order \u00b6 In /var/spool/hylafax/etc/config, you can use the \u201cany\u201d modem group to specify which modem devices to use. For example, to only use boston00 to boston07, use: ModemGroup: \u201cany:boston0[0-7]\" The field is a regular expression and can get as complicated as it needs to be. For example, to use boston00 through boston12, here's the regexp: \"any:boston(0[0-9]|1[0-2])\" No restarts are required to put this into effect. Additionally, you can tell the system in which order to use the devices. You can specify a modem priority for each channel by editing the /var/spool/hylafax/etc/config.bostonXX files and adding the ModemPriority parameter, which sets the scheduling priority to use for a modem. Priority values are in the range 0 to 255 with lesser values signifying higher (more desirable) priority. The HylaFAX scheduler process assigns the highest priority modem that is ready for use when scheduling an outbound job. If multiple available modems in a job's selected ModemGroup have the same ModemPriority value, then the HylaFAX scheduler assigns jobs to them in a round-robin fashion. For example, in config.boston22 add: ModemPriority: 0 And in config.boston00 add: ModemPriority: 23 And in files config.boston21 to config.boston01 complete the range of values. For example: config.boston21: ModemPriority: 1 config.boston20: ModemPriority: 2 config.boston19: ModemPriority: 3 ... config.boston02: ModemPriority: 21 config.boston01: ModemPriority: 22 Afterwards, restart the btgetty's so that they immediately reload their configuration. for i in /var/spool/hylafax/FIFO.boston0[0-1]; do echo Q > $i; done Pausing Modems \u00b6 Add the following to the bottom of /var/spool/hylafax/etc/config: ModemGroup: \"any:hold\" No restarts are required to put this into effect. (faxq rereads the etc/config file after receiving another event - such as a new job being created - so once the file is edited, no new jobs will be sent.) When all channels are \"Running and idle\u201d then the queue is officially paused. Then to un-pause the queue, comment out the ModemGroup line. At that point you can force faxq to reread the config file by running echo Z > /var/spool/hylafax/FIFO","title":"Sending Faxes"},{"location":"master/sending-faxes/#sending-faxes","text":"","title":"Sending Faxes"},{"location":"master/sending-faxes/#sendfax","text":"HylaFAX includes a command line program called sendfax for sending faxes. Typical usage would be something like: $ sendfax -f \"myname@mydomain.com\" -R -r \"faxsubject\" -c \"coverpage comments\" -x \"Recipient\u2019s company\" -d \"Recipient@1234567\" tofax.pdf where myname@mydomain.com is a valid e-mail address for the sender, 1234567 is the number where to fax, and tofax.pdf is the image file to be faxed. Standard HylaFAX-compatible file formats are ASCII, TIFF, PostScript, and PDF. Be aware that sendfax is capable of handling multiple -d options and that only the options that precede it apply to that instance of the -d. In most cases the -d option is the last option that should be used. See the sendfax manpage for more information. man sendfax","title":"sendfax"},{"location":"master/sending-faxes/#sendfax-options","text":"","title":"sendfax options:"},{"location":"master/sending-faxes/#priorities","text":"-P Ex: sendfax -P 63 ... Priority Assign the specified scheduling priority to subsequent jobs. A priority is an integer value in the range [0-255]. Lower values result in higher priority processing. By default, each job is assigned 127 for an initial scheduling priority. If a job\u2019s priority is greater than bulk faxes then the job\u2019s priority is raised (numerically lowered) for each failed attempt to transmit so that retransmit attempts are done ahead of newly submitted jobs. In the case of bulk faxes (numerically higher than 190), then the job\u2019s priority is lowered (numerically raised) for each failed attempt to transmit so that the whole of the bulk-queued jobs will be attempted before any are retried. The priority may also be specified as one of the following symbolic names: default or normal (127), bulk or junk (191), low (190), or high (63).","title":"Priorities"},{"location":"master/sending-faxes/#compression","text":"-1 Ex: sendfax -1 ... Transmit facsimile documents using 1-D MH compression. By default HylaFAX will use the optimal compression scheme supported by the transmitting modem and receiving facsimile device. -2 Ex: sendfax -2 ... Transmit facsimile documents using 2-D MR compression, if possible. By default HylaFAX will use the optimal compression scheme supported by the transmitting modem and receiving facsimile device. -3 Ex: sendfax -3 ... Transmit facsimile documents using 2-D MMR compression, if possible. By default HylaFAX will use the optimal compression scheme supported by the transmitting modem and receiving facsimile device.","title":"Compression"},{"location":"master/sending-faxes/#speed","text":"-b speed Ex: sendfax -b 14400 ... Transmit facsimile documents using a signalling rate that is constrained to be at least speed bits/second. If the specified speed is greater than the transmitting modem or receiver is capable of, it is reduced to the highest possible speed both devices support. If a negotiated signalling rate greater than or equal to speed cannot be negotiated then the job is aborted. Possible speeds are: 2400, 4800, 7200, 9600, 12000, 14400, 16800, 19200, 21600, 24000, 26400, 28800, 31200, and 33600. By default Hyla FAX will use the fastest possible rate supported by the transmitting modem and receiving facsimile device. -B speed Ex: sendfax -B 2400 ... Try to transmit facsimile documents using the desired signalling rate. Possible speeds are: 2400, 4800, 7200, 9600, 12000, 14400, 16800, 19200, 21600, 24000, 26400, 28800, 31200, and 33600. If the specified speed is greater than the transmitting modem or receiver is capable of, it is reduced to the highest possible speed both devices support. By default Hyla FAX will use the fastest possible rate supported by the transmitting modem and receiving facsimile device (unless restricted by other server configuration); this option can be used to reduce the speed. Note that international calls are frequently more reliable when transmissions are restricted to 9600 bits/second. For Class 1/1.0 devices, if the specified speed is not greater than 14400 then V.34 will not be attempted, and if the specified speed is 9600 or 7200 then V.29 will be assumed in lieu of V.17.","title":"Speed"},{"location":"master/sending-faxes/#caller-id-tsi","text":"-S Ex: sendfax -S 1234567890 ... Pass tsi to the server as the suggested sender identification to be used, for example, in tagline imaging and fax protocol.","title":"Caller ID /tsi"},{"location":"master/sending-faxes/#use-specific-modem","text":"-h modem@localhost Ex: sendfax -h boston00@localhost ...","title":"Use specific modem"},{"location":"master/sending-faxes/#tries-and-max-dials","text":"Create a page for deeper explination of both -t tries Ex: sendfax -t 6 ... Make no more than tries attempts to send the facsimile. (A try is a call in which carrier is established and the facsimile protocol is commenced; this is contrasted with a call attempt that might have failed because the line was busy.) Without specifying a \"tries\" value to the server Hyla FAX will, with some exceptions, make an unlimited number of attempts to completely send the facsimile before the kill time expires. (The exceptions are that Hyla FAX will terminate a job if 3 consecutive attempts to send a particular page fail, or if it appears the receiver is not a facsimile machine.) Use ''-1'' to indicate that no tries value should be specified to the server. -T maxdials Ex: sendfax -T 4 ... Make no more than maxdials calls in attempting to send the facsimile. By default, HylaFAX will redial 12 times before killing a job. Use ''-1'' to indicate that no maxdials value should be specified to the server.","title":"Tries and Max dials"},{"location":"master/sending-faxes/#custom-client-applications","text":"Should you desire to write your own client application for submitting faxes to HylaFAX, below are sample applications in .NET and Java: \u2022 .NET sample client http://people.ifax.com/~david/dotnetsample.zip \u2022 Java sample client http://people.ifax.com/~david/javasample.zip","title":"Custom Client Applications"},{"location":"master/sending-faxes/#web-interface","text":"add link to web interface doc","title":"Web Interface"},{"location":"master/sending-faxes/#email-to-fax","text":"Email to FAX is simply a matter of Postfix receiving an email and handing it off to the faxmail program. Postfix is the email server that receives the email, and faxmail is a program included with HylaFAX for processing email messages and submitting them to HylaFAX for faxing. In the \"Configuring Mail\" area of the HylaFAX Enterprise Appliance console, you can set up Email to FAX support. To configure Email to FAX support, enter the domain name that you intend to use into the \u201cFax Domain\u201d field (ie. fax.example.com) and save your changes. Keep in mind that your mail server must be able to lookup the Fax Domain in your network's DNS in order to deliver emails to the HylaFAX Enterprise server. Next, send the email by addressing the recipient using the \"FAXNUMBER@fax.example.com\" format where FAXNUMBER is the actual fax number. If the job was successfully added to the HylaFAX queue, you'll see it in the Outbox of web interface and in the output of \"faxstat -s\".","title":"Email-to-Fax"},{"location":"master/sending-faxes/#email-to-fax-tweaks","text":"","title":"Email-to-Fax tweaks:"},{"location":"master/sending-faxes/#increase-postfix-message-size-limit","text":"To review the current maximum message size limit, run: postconf message_size_limit To increase the max message size limit, run: postconf -e message_size_limit = 20480000 postfix reload","title":"Increase postfix message size limit"},{"location":"master/sending-faxes/#multiple-fax-domains","text":"To set this up you will need to edit the postfix configration file main.cf located at /etc/postfix/ . At the bottom of this file is the variable relay_domains . Add your new domains to that variable separated by a comma. relay_domains = faxserver.example.com, faxserver.test.com, faxserver.ifax.com In the file virtual_alias-fax located at /etc/postfix/ , add a line at the bottom for each new domain in this style (this would be to add \"fax.newdomain.com\" as an email-to-FAX domain: /^ ([ + ] ? [ 0 -9*#.- ] + ) @fax \\. newdomain \\. com$/ $1 @fax.localhost Finally reload the postfix configuration: postfix reload","title":"Multiple Fax Domains"},{"location":"master/sending-faxes/#ignore-email-body","text":"If you would like to ignore the email body of an Email to FAX message, execute the following command: ln -s /bin/true /usr/sbin/faxmail/text/plain That file tells faxmail to ignore \"text/plain\" email attachments, which is what the email body consists of. Simply delete /usr/sbin/faxmail/text/plain and faxmail will send the email body in addition to any other plain text files in the email to HylaFAX for faxing.","title":"Ignore Email Body"},{"location":"master/sending-faxes/#disable-email-headers","text":"Create /etc/hylafax/faxmail.conf with the following content to disable the email headers from appearing in the fax: AutoCoverPage: false TextPointSize: 12pt Headers: clear MailUser: faxmail TrimText: yes","title":"Disable Email Headers"},{"location":"master/sending-faxes/#disable-cover-pages","text":"Create /etc/hylafax/faxmail.conf with the following content to disable the email headers from appearing in the fax: AutoCoverPage: false TextPointSize: 12pt Headers: clear MailUser: faxmail TrimText: yes","title":"Disable Cover Pages"},{"location":"master/sending-faxes/#modem-control","text":"","title":"Modem Control"},{"location":"master/sending-faxes/#specifying-default-outbound-devices","text":"You can use the ModemReadyState parameter in the /var/spool/hylafax/etc/config.bostonXX files to control whether or not the device is assigned to outbound jobs. For example, if you want to dedicate boston00 to boston01 for receiving faxes only (thus allowing boston02-07 to both send and receive faxes), then you would add the following setting to files config.boston00 and config.boston01 : ModemReadyState: D That would tell HylaFAX not to use boston00 and boston01 for outbound jobs. For details, please see the hylafax-config manpage. Afterward, restart the affected btgettys so that they immediately reload their configuration: faxquit boston00; faxquit boston01 -or- for i in /var/spool/hylafax/FIFO.boston0[0-1]; do echo Q > $i; done","title":"Specifying Default Outbound Devices"},{"location":"master/sending-faxes/#modem-order","text":"In /var/spool/hylafax/etc/config, you can use the \u201cany\u201d modem group to specify which modem devices to use. For example, to only use boston00 to boston07, use: ModemGroup: \u201cany:boston0[0-7]\" The field is a regular expression and can get as complicated as it needs to be. For example, to use boston00 through boston12, here's the regexp: \"any:boston(0[0-9]|1[0-2])\" No restarts are required to put this into effect. Additionally, you can tell the system in which order to use the devices. You can specify a modem priority for each channel by editing the /var/spool/hylafax/etc/config.bostonXX files and adding the ModemPriority parameter, which sets the scheduling priority to use for a modem. Priority values are in the range 0 to 255 with lesser values signifying higher (more desirable) priority. The HylaFAX scheduler process assigns the highest priority modem that is ready for use when scheduling an outbound job. If multiple available modems in a job's selected ModemGroup have the same ModemPriority value, then the HylaFAX scheduler assigns jobs to them in a round-robin fashion. For example, in config.boston22 add: ModemPriority: 0 And in config.boston00 add: ModemPriority: 23 And in files config.boston21 to config.boston01 complete the range of values. For example: config.boston21: ModemPriority: 1 config.boston20: ModemPriority: 2 config.boston19: ModemPriority: 3 ... config.boston02: ModemPriority: 21 config.boston01: ModemPriority: 22 Afterwards, restart the btgetty's so that they immediately reload their configuration. for i in /var/spool/hylafax/FIFO.boston0[0-1]; do echo Q > $i; done","title":"Modem Order"},{"location":"master/sending-faxes/#pausing-modems","text":"Add the following to the bottom of /var/spool/hylafax/etc/config: ModemGroup: \"any:hold\" No restarts are required to put this into effect. (faxq rereads the etc/config file after receiving another event - such as a new job being created - so once the file is edited, no new jobs will be sent.) When all channels are \"Running and idle\u201d then the queue is officially paused. Then to un-pause the queue, comment out the ModemGroup line. At that point you can force faxq to reread the config file by running echo Z > /var/spool/hylafax/FIFO","title":"Pausing Modems"},{"location":"master/troubleshooting/","text":"Troubleshooting and FAQ \u00b6 Logs \u00b6 When troubleshooting problems, it is important to take a look at the logs. HylaFAX creates a new session log file in log/ for every fax transmission. See the hylafax-log manpage for specific error message information. It may also be prudent to turn up ServerTracing in the etc/config file, and SessionTracing in the etc/CONFIG/site file. The normal debugging value would be 0xFFF . For increased low-level output, use 0xFFFFF . You must restart the faxgetty and btgetty processes after editing etc/CONFIG/site . Other Logs that might help /var/log/hylafax/console.log - appliance console logs /var/log/hylafax/faxq.log - fax queuer logs /var/log/hylafax/hfaxd.log /var/log/hylafax/boston.log /var/log/hylafax/lmgrd.log xferfaxlog \u00b6 Master call log /var/spool/hylafax/etc/xferfaxlog contains a summary of each sent and received fax. There's one line for each sent fax (SENT records) and two for each received; one for the fax (RECV), one for the call (CALL). Example: 05 /11/22 14 :11 SEND 000000415 boston00 140 \"\" root@localhost \"215-825-8792\" \"iFAXSolutions\" 2220073 1 0 :00:24 0 :00:23 \"\" \"\" \"\" \"\" \"root\" \"\" 05 /11/22 14 :12 RECV 000000416 boston01 recvq/fax000000067.tif \"\" fax \"\" \"IFAX DEBUG\" 2220073 2 0 :00:33 0 :00:33 \"\" \"18177696712\" \"12158258792\" \"iFax Solutions\" \"\" \"00 00 00\" 05 /11/22 14 :12 CALL 000000416 boston01 \"\" fax \"\" \"\" 0 0 0 :00:36 0 :00:36 \"\" \"18177696712\" \"12158258792\" \"iFax Solutions\" \"\" \"\" 05 /11/22 14 :14 SEND 000000417 boston01 141 \"\" root@localhost \"215-825-8792\" \"iFAXSolutions\" 2220073 1 0 :00:24 0 :00:22 \"\" \"\" \"\" \"\" \"root\" \"\" 05 /11/22 14 :14 RECV 000000418 boston00 recvq/fax000000068.tif \"\" fax \"\" \"IFAX DEBUG\" 2220073 2 0 :00:32 0 :00:32 \"\" \"18177696712\" \"12158258792\" \"iFax Solutions\" \"\" \"00 00 00\" 05 /11/22 14 :14 CALL 000000418 boston00 \"\" fax \"\" \"\" 0 0 0 :00:36 0 :00:36 \"\" \"18177696712\" \"12158258792\" \"iFax Solutions\" \"\" \"\" 05 /11/22 14 :20 RECV 000000420 boston01 recvq/fax000000069.tif \"\" fax \"\" \"HylaFAX Enterprise\" 2220073 1 0 :01:08 0 :01:08 \"\" \"18177696712\" \"18177696712\" \"\" \"\" \"00 00 00\" Restarting the btgetty and faxgetty processes \u00b6 After making a configuration change to etc/config.bostonXX , etc/config.ttySX , or any of the files that those files include, run the following to restart the btgetty and/or faxgetty processes that read those configuration files: for i in /var/spool/hylafax/FIFO.* ; do echo Q > $i ; done The echo Q will restart them gracefully, meaning that if they are receiving a fax, they will restart only after they\u2019re done. Restarting the Brooktrout devices \u00b6 To completely restart the Brooktrout TR1034 and/or SR140 execute: systemctl restart hylafax-bt Performing a Packet Capture \u00b6 You can perform the packet captures by running the following command before sending a fax: tcpdump -s0 -n -i eth0 -w /tmp/sip.pcap udp or icmp If you\u2019re not using eth0 for SIP/T.38, replace eth0 with the name of your ethernet adapter (e.g. ens33, ens192, sit0, etc) in the command above. Hit Ctrl+c to stop the capture when the call is complete. You can view the status of the fax server by running the following command in order to know what it\u2019s currently doing in real time: watch faxstat -s Execute gzip /tmp/sip.pcap to compress the pcap file before sending it to us. Uninstalling HylaFAX Enterprise \u00b6 To uninstall HylaFAX Enterprise, run: yum remove hylafax-enterprise-appliance Manuals \u00b6 UNIX Man Pages For a better understanding of the HylaFAX system, you\u2019ll want to read the following man pages: \u2022 man hylafax-server \u2022 man hylafax-client \u2022 man hylafax-config \u2022 man xferfaxlog \u2022 man faxrcvd \u2022 man notify \u2022 man faxmail \u2022 man hosts.hfaxd \u2022 man faxadduser \u2022 man faxdeluser Manuals Online \u00b6 You can also find the most comprehensive documentation online at: http://www.hylafax.org/content/Handbook and http://www.hylafax.org/content/Man_Pages Frequently Asked Questions \u00b6 What are \"Hangup: DCN received in Command-Receive\" errors? \u00b6 That basically means that the remote side sent us a DCN (disconnect) signal unexpectedly. There are many reasons for which they may have done this, ranging from someone on the sending side asking their fax machine to abort the transmission, to more problematic situations like bad phone line condition. One should only worry about these if they\u2019re consistently failing with a specific fax number \u2014 in that case there may be a problem that bears further examination. But if only a small number of these are seen, and if the same fax number that failed a few minutes earlier reconnects and successfully transmits a fax, then they\u2019re not worth worrying about. Occasional failures are a fact of life, but systematic errors are worth investigating. \"Invalid dialing command\" errors? \u00b6 In most cases, \"Invalid dialing command\" means that the telephone company or PBX rejected our call as invalid, or played us a 'your call cannot be completed as dialed' recording. Check the number and try again. \"No loop current\" \u00b6 The \"No loop current\" error happens when the fax modem is expecting a normal fax transmission but the remote side of the call hangs up instead. Regarding inbound calls, this usually occurs when someone dials the fax server\u2019s number and hangs up once they hear fax tones. No carrier detected\" errors \u00b6 \"No carrier detected\" errors typically occur when the modem dials a number and establishes a connection but is unable to detect a \"fax carrier\" like a fax server or fax machine. In this case, the modem will eventually hang up and show the \"No carrier detected\" error. Should this happen, verify that the fax number is answered by a fax machine and not an answering machine or something else. \"BfvFaxEndOfDocument did not return in 600000ms\" errors \u00b6 The BfvFaxEndOfDocument error occurs when a timeout of 10 minutes has elapsed after the last page is sent and before the end of transmission. This can occur when sending complex pages at slow speeds and/or when there are multiple Partial Page Requests (PPR), but this shouldn\u2019t occur frequently. Blocked by Concurrent calls \u00b6 By default, HylaFAX will schedule a job immediately if a modem is available. However, if you\u2019re sending multiple fax jobs to the same destination, the first job will be sent out immediately while the second one waits for the transmission to complete. HylaFAX does this in order to avoid calling a fax machine that is known to be busy. If you know that specific destinations have multiple fax lines, you can use a JobControl script to dynamically configure the MaxConcurrentCalls setting for those destinations (thus allowing HylaFAX to place multiple simultaneous calls to those destinations). For details on MaxConcurrentCalls, please see the hylafax-config manpage. A sample JobControl script can be found here: http://people.ifax.com/~david/jobcontrol/jobcontrol-cid.sh limit all fax transmissions to 9,600 bit/s (V.29) \u00b6 Yes, edit /var/spool/hylafax/etc/CONFIG/boston and add the following parameter: BTWireModulation: V29 Afterwards, restart the 'btgetty' processes. Can I install VMware Tools? Yes, on CentOS 7, simply install the 'open-vm-tools' package. Why are we seeing \"SIP 488 Not Acceptable Here\" messages in our packet captures? We\u2019ve usually seen this for outbound calls when the remote side answers the call but takes longer than usual before sending fax tones. This can be caused by some sort of a device that answers the call in order to determine whether it is a fax call before transferring the call to a fax machine. Usually when there is a problem when this happens it\u2019s because the CED timeout to receive the T.38 re-INVITE has expired by the time the SIP gateway sends the T.38 re-INVITE. The SR140 will then send \"SIP 488 Not Acceptable Here\" and fallback to G.711 (if configured to do so) or end the call. To extend the CED timeout, add the following parameter to /var/spool/hylafax/etc/CONFIG/boston: BTCEDTimeout: 30 Afterwards, restart the btgetty processes. Brooktrout TR1034 how many rings will the HylaFAX server wait before timing out assuming there is no carrier on the other end? \u00b6 The length of time HylaFAX will wait to establish a conversation with the receiver when sending is controlled by the ced_timeout parameter. By default it\u2019s 40 seconds. To change that to 60, edit ifax/bt/config/btcall.cfg and change: ced_timeout 4000 to ced_timeout 6000 The value specifies the length of time, in 10 ms units, to wait for a fax answer tone (CED tone) from a remote fax machine. The maximum value is 65535 (655 seconds). Once you\u2019ve saved your changes, you don\u2019t need to restart HylaFAX \u2014 changes made to this file take effect immediately.","title":"Troubleshooting and FAQ"},{"location":"master/troubleshooting/#troubleshooting-and-faq","text":"","title":"Troubleshooting and FAQ"},{"location":"master/troubleshooting/#logs","text":"When troubleshooting problems, it is important to take a look at the logs. HylaFAX creates a new session log file in log/ for every fax transmission. See the hylafax-log manpage for specific error message information. It may also be prudent to turn up ServerTracing in the etc/config file, and SessionTracing in the etc/CONFIG/site file. The normal debugging value would be 0xFFF . For increased low-level output, use 0xFFFFF . You must restart the faxgetty and btgetty processes after editing etc/CONFIG/site . Other Logs that might help /var/log/hylafax/console.log - appliance console logs /var/log/hylafax/faxq.log - fax queuer logs /var/log/hylafax/hfaxd.log /var/log/hylafax/boston.log /var/log/hylafax/lmgrd.log","title":"Logs"},{"location":"master/troubleshooting/#xferfaxlog","text":"Master call log /var/spool/hylafax/etc/xferfaxlog contains a summary of each sent and received fax. There's one line for each sent fax (SENT records) and two for each received; one for the fax (RECV), one for the call (CALL). Example: 05 /11/22 14 :11 SEND 000000415 boston00 140 \"\" root@localhost \"215-825-8792\" \"iFAXSolutions\" 2220073 1 0 :00:24 0 :00:23 \"\" \"\" \"\" \"\" \"root\" \"\" 05 /11/22 14 :12 RECV 000000416 boston01 recvq/fax000000067.tif \"\" fax \"\" \"IFAX DEBUG\" 2220073 2 0 :00:33 0 :00:33 \"\" \"18177696712\" \"12158258792\" \"iFax Solutions\" \"\" \"00 00 00\" 05 /11/22 14 :12 CALL 000000416 boston01 \"\" fax \"\" \"\" 0 0 0 :00:36 0 :00:36 \"\" \"18177696712\" \"12158258792\" \"iFax Solutions\" \"\" \"\" 05 /11/22 14 :14 SEND 000000417 boston01 141 \"\" root@localhost \"215-825-8792\" \"iFAXSolutions\" 2220073 1 0 :00:24 0 :00:22 \"\" \"\" \"\" \"\" \"root\" \"\" 05 /11/22 14 :14 RECV 000000418 boston00 recvq/fax000000068.tif \"\" fax \"\" \"IFAX DEBUG\" 2220073 2 0 :00:32 0 :00:32 \"\" \"18177696712\" \"12158258792\" \"iFax Solutions\" \"\" \"00 00 00\" 05 /11/22 14 :14 CALL 000000418 boston00 \"\" fax \"\" \"\" 0 0 0 :00:36 0 :00:36 \"\" \"18177696712\" \"12158258792\" \"iFax Solutions\" \"\" \"\" 05 /11/22 14 :20 RECV 000000420 boston01 recvq/fax000000069.tif \"\" fax \"\" \"HylaFAX Enterprise\" 2220073 1 0 :01:08 0 :01:08 \"\" \"18177696712\" \"18177696712\" \"\" \"\" \"00 00 00\"","title":"xferfaxlog"},{"location":"master/troubleshooting/#restarting-the-btgetty-and-faxgetty-processes","text":"After making a configuration change to etc/config.bostonXX , etc/config.ttySX , or any of the files that those files include, run the following to restart the btgetty and/or faxgetty processes that read those configuration files: for i in /var/spool/hylafax/FIFO.* ; do echo Q > $i ; done The echo Q will restart them gracefully, meaning that if they are receiving a fax, they will restart only after they\u2019re done.","title":"Restarting the btgetty and faxgetty processes"},{"location":"master/troubleshooting/#restarting-the-brooktrout-devices","text":"To completely restart the Brooktrout TR1034 and/or SR140 execute: systemctl restart hylafax-bt","title":"Restarting the Brooktrout devices"},{"location":"master/troubleshooting/#performing-a-packet-capture","text":"You can perform the packet captures by running the following command before sending a fax: tcpdump -s0 -n -i eth0 -w /tmp/sip.pcap udp or icmp If you\u2019re not using eth0 for SIP/T.38, replace eth0 with the name of your ethernet adapter (e.g. ens33, ens192, sit0, etc) in the command above. Hit Ctrl+c to stop the capture when the call is complete. You can view the status of the fax server by running the following command in order to know what it\u2019s currently doing in real time: watch faxstat -s Execute gzip /tmp/sip.pcap to compress the pcap file before sending it to us.","title":"Performing a Packet Capture"},{"location":"master/troubleshooting/#uninstalling-hylafax-enterprise","text":"To uninstall HylaFAX Enterprise, run: yum remove hylafax-enterprise-appliance","title":"Uninstalling HylaFAX Enterprise"},{"location":"master/troubleshooting/#manuals","text":"UNIX Man Pages For a better understanding of the HylaFAX system, you\u2019ll want to read the following man pages: \u2022 man hylafax-server \u2022 man hylafax-client \u2022 man hylafax-config \u2022 man xferfaxlog \u2022 man faxrcvd \u2022 man notify \u2022 man faxmail \u2022 man hosts.hfaxd \u2022 man faxadduser \u2022 man faxdeluser","title":"Manuals"},{"location":"master/troubleshooting/#manuals-online","text":"You can also find the most comprehensive documentation online at: http://www.hylafax.org/content/Handbook and http://www.hylafax.org/content/Man_Pages","title":"Manuals Online"},{"location":"master/troubleshooting/#frequently-asked-questions","text":"","title":"Frequently Asked Questions"},{"location":"master/troubleshooting/#what-are-hangup-dcn-received-in-command-receive-errors","text":"That basically means that the remote side sent us a DCN (disconnect) signal unexpectedly. There are many reasons for which they may have done this, ranging from someone on the sending side asking their fax machine to abort the transmission, to more problematic situations like bad phone line condition. One should only worry about these if they\u2019re consistently failing with a specific fax number \u2014 in that case there may be a problem that bears further examination. But if only a small number of these are seen, and if the same fax number that failed a few minutes earlier reconnects and successfully transmits a fax, then they\u2019re not worth worrying about. Occasional failures are a fact of life, but systematic errors are worth investigating.","title":"What are \"Hangup: DCN received in Command-Receive\" errors?"},{"location":"master/troubleshooting/#invalid-dialing-command-errors","text":"In most cases, \"Invalid dialing command\" means that the telephone company or PBX rejected our call as invalid, or played us a 'your call cannot be completed as dialed' recording. Check the number and try again.","title":"\"Invalid dialing command\" errors?"},{"location":"master/troubleshooting/#no-loop-current","text":"The \"No loop current\" error happens when the fax modem is expecting a normal fax transmission but the remote side of the call hangs up instead. Regarding inbound calls, this usually occurs when someone dials the fax server\u2019s number and hangs up once they hear fax tones.","title":"\"No loop current\""},{"location":"master/troubleshooting/#no-carrier-detected-errors","text":"\"No carrier detected\" errors typically occur when the modem dials a number and establishes a connection but is unable to detect a \"fax carrier\" like a fax server or fax machine. In this case, the modem will eventually hang up and show the \"No carrier detected\" error. Should this happen, verify that the fax number is answered by a fax machine and not an answering machine or something else.","title":"No carrier detected\" errors"},{"location":"master/troubleshooting/#bfvfaxendofdocument-did-not-return-in-600000ms-errors","text":"The BfvFaxEndOfDocument error occurs when a timeout of 10 minutes has elapsed after the last page is sent and before the end of transmission. This can occur when sending complex pages at slow speeds and/or when there are multiple Partial Page Requests (PPR), but this shouldn\u2019t occur frequently.","title":"\"BfvFaxEndOfDocument did not return in 600000ms\" errors"},{"location":"master/troubleshooting/#blocked-by-concurrent-calls","text":"By default, HylaFAX will schedule a job immediately if a modem is available. However, if you\u2019re sending multiple fax jobs to the same destination, the first job will be sent out immediately while the second one waits for the transmission to complete. HylaFAX does this in order to avoid calling a fax machine that is known to be busy. If you know that specific destinations have multiple fax lines, you can use a JobControl script to dynamically configure the MaxConcurrentCalls setting for those destinations (thus allowing HylaFAX to place multiple simultaneous calls to those destinations). For details on MaxConcurrentCalls, please see the hylafax-config manpage. A sample JobControl script can be found here: http://people.ifax.com/~david/jobcontrol/jobcontrol-cid.sh","title":"Blocked by Concurrent calls"},{"location":"master/troubleshooting/#limit-all-fax-transmissions-to-9600-bits-v29","text":"Yes, edit /var/spool/hylafax/etc/CONFIG/boston and add the following parameter: BTWireModulation: V29 Afterwards, restart the 'btgetty' processes. Can I install VMware Tools? Yes, on CentOS 7, simply install the 'open-vm-tools' package. Why are we seeing \"SIP 488 Not Acceptable Here\" messages in our packet captures? We\u2019ve usually seen this for outbound calls when the remote side answers the call but takes longer than usual before sending fax tones. This can be caused by some sort of a device that answers the call in order to determine whether it is a fax call before transferring the call to a fax machine. Usually when there is a problem when this happens it\u2019s because the CED timeout to receive the T.38 re-INVITE has expired by the time the SIP gateway sends the T.38 re-INVITE. The SR140 will then send \"SIP 488 Not Acceptable Here\" and fallback to G.711 (if configured to do so) or end the call. To extend the CED timeout, add the following parameter to /var/spool/hylafax/etc/CONFIG/boston: BTCEDTimeout: 30 Afterwards, restart the btgetty processes.","title":"limit all fax transmissions to 9,600 bit/s (V.29)"},{"location":"master/troubleshooting/#brooktrout-tr1034-how-many-rings-will-the-hylafax-server-wait-before-timing-out-assuming-there-is-no-carrier-on-the-other-end","text":"The length of time HylaFAX will wait to establish a conversation with the receiver when sending is controlled by the ced_timeout parameter. By default it\u2019s 40 seconds. To change that to 60, edit ifax/bt/config/btcall.cfg and change: ced_timeout 4000 to ced_timeout 6000 The value specifies the length of time, in 10 ms units, to wait for a fax answer tone (CED tone) from a remote fax machine. The maximum value is 65535 (655 seconds). Once you\u2019ve saved your changes, you don\u2019t need to restart HylaFAX \u2014 changes made to this file take effect immediately.","title":"Brooktrout TR1034 how many rings will the HylaFAX server wait before timing out assuming there is no carrier on the other end?"},{"location":"master/web-ssl/","text":"SSL for web interface: yum install mod_ssl openssl After installing mod_ssl and openssl, you may need to set \"SSLEngine off\" in the section of /etc/httpd/conf.d/ssl.conf. Afterwards, add the following to the HylaFAX Enterprise Web Interface's VirtualHost configuration in /etc/httpd/conf.d/fax.conf: NameVirtualHost *:443 SSLEngine onSSLCertificateFile /etc/pki/tls/certs/fax.example.edu.crtSSLCertificateKeyFile /etc/pki/tls/private/fax.example.edu-private.keySSLCertificateChainFile /etc/pki/tls/certs/fax.example.edu.ca-bundleDocumentRoot /var/www/fax/appServerName fax.example.eduErrorLog logs/fax-ssl-error_logCustomLog logs/fax-ssl-access_log common# PHP OPTIONSphp_admin_value file_uploads 1php_admin_value upload_max_filesize 40Mphp_admin_value post_max_size 40M Of course you'll want to update the paths to your SSL certificates and the ServerName.","title":"SSL for Web Interface"},{"location":"quickstart/activating-the-license/","text":"Activating the license \u00b6 From the Advanced Options menu of the HylaFAX Enterprise Appliance console, select Activate License(s) in order to activate your appliance. Enter your Serial Number, then select Activate and press ENTER.","title":"Activate License"},{"location":"quickstart/activating-the-license/#activating-the-license","text":"From the Advanced Options menu of the HylaFAX Enterprise Appliance console, select Activate License(s) in order to activate your appliance. Enter your Serial Number, then select Activate and press ENTER.","title":"Activating the license"},{"location":"quickstart/appliance-installation/","text":"HylaFAX Enterprise Appliance Quick Start Guide Appliance Installation \u00b6 This documentation will guide you through the initial steps for installing the HylaFAX Enterprise Appliance. The Appliance can be downloaded at the following URL and then burned to disc, flash drive or used directly with your virtual machine: Download Here Verify Download: Checksums Need software to make a live flash drive? We recommend balenaEtcher: balenaEtcher Launch a DigitalOcean Droplet with the link below: One Click Deploy Notes about using VMware, Hyper-V and other virtualization platforms: The Appliance ISO is based on RedHat/CentOS 7 64-bit. UEFI might need to be disabled if you are not seeing any network interface devices. If the installation fails because of a hard drive problem, try using a different type of virtual hard drive. For example, a virtual IDE hard drive instead of a virtual SCSI hard drive, or vice-versa. For VMware, use the \u201ce1000\u201d network adapter. For Hyper-V, use the \u201clegacy\u201d network adapter.","title":"Getting Started"},{"location":"quickstart/appliance-installation/#appliance-installation","text":"This documentation will guide you through the initial steps for installing the HylaFAX Enterprise Appliance. The Appliance can be downloaded at the following URL and then burned to disc, flash drive or used directly with your virtual machine: Download Here Verify Download: Checksums Need software to make a live flash drive? We recommend balenaEtcher: balenaEtcher Launch a DigitalOcean Droplet with the link below: One Click Deploy Notes about using VMware, Hyper-V and other virtualization platforms: The Appliance ISO is based on RedHat/CentOS 7 64-bit. UEFI might need to be disabled if you are not seeing any network interface devices. If the installation fails because of a hard drive problem, try using a different type of virtual hard drive. For example, a virtual IDE hard drive instead of a virtual SCSI hard drive, or vice-versa. For VMware, use the \u201ce1000\u201d network adapter. For Hyper-V, use the \u201clegacy\u201d network adapter.","title":"Appliance Installation"},{"location":"quickstart/configure-dialing-options/","text":"Configure Dialing Options \u00b6 In the Configure Dialing Options area of the Advanced Options section, you can configure how HylaFAX Enterprise dials fax numbers for outbound fax jobs. Should your phone system require dialing 9 (or another number) before the fax number, enter that number in the Outside Dialing Prefix field. In the Local number min length field, enter the number of digits required for a local call. In the LD number min length field, enter the number of digits required for a long distance call.In the Other local area codes field, list any other local area codes that must not be dialed with the long distance code. Separated the area codes with a pipe symbol \u201c|\u201d. For example: 212|213|214 If your phone system requires all calls to be dialed with your local area code, then enable Always dial local area code.","title":"Configure Dialing Options"},{"location":"quickstart/configure-dialing-options/#configure-dialing-options","text":"In the Configure Dialing Options area of the Advanced Options section, you can configure how HylaFAX Enterprise dials fax numbers for outbound fax jobs. Should your phone system require dialing 9 (or another number) before the fax number, enter that number in the Outside Dialing Prefix field. In the Local number min length field, enter the number of digits required for a local call. In the LD number min length field, enter the number of digits required for a long distance call.In the Other local area codes field, list any other local area codes that must not be dialed with the long distance code. Separated the area codes with a pipe symbol \u201c|\u201d. For example: 212|213|214 If your phone system requires all calls to be dialed with your local area code, then enable Always dial local area code.","title":"Configure Dialing Options"},{"location":"quickstart/configure-networking/","text":"Configure Networking \u00b6 Initially, the appliance will be configured for DHCP networking, which is sufficient for testing in fax loopback mode . However, a static IP address is recommended for production serversso that the IP address remains fixed across reboots. Furthermore, if you intend to use a third-party SIP provider, you may need to configure the server to use a public IP address in order to avoid any network address translation (NAT) traversal problems. The appliance does not support NAT itself, and generally assumes all SIP proxies, registrars or peers will reside on the same local network segment. If you configure the appliance to connect to a SIP provider on some other remote network without taking any special precautions, the two devices will normally fail to communicate as the SIP provider is trying to reach the appliance on what it sees as its public IP, which is usually the IP of the company's firewall or edge router instead of the appliance. Expert tip: With careful planning and configuration it is possible to use SIP/NAT proxy tools, firewall DMZ features, or SIP application level gateways (ALGs) to handle the tracking and rewriting of SIP packets and allow HylaFAX to connect to a remote SIP provider from behind a NAT on a private LAN, but this should only be attempted after first testing the connection to this provider with the appliance on a globally-routable, public IP address. To configure a static IP address, select the Configure Network option from the Advanced Options menu. Select Edit Devices and press ENTER . Select eth0 or whatever the name of your adapter is and press ENTER. Deselect Use DHCP and then enter the desired Static IP address , Netmask , and Default Gateway IP (not the SIP gateway) into the respective fields. Select OK and press ENTER , and then select SAVE and press ENTER to return to the Configure Network menu. Next, you must setup DNS by selecting Edit DNS configuration and pressing ENTER. Enter the IP address of the Primary and Secondary(optional) DNS servers in the respective fields. Then select OK and press ENTER . To save and apply your changes, select Save & Quit and press ENTER .","title":"Configure Networking"},{"location":"quickstart/configure-networking/#configure-networking","text":"Initially, the appliance will be configured for DHCP networking, which is sufficient for testing in fax loopback mode . However, a static IP address is recommended for production serversso that the IP address remains fixed across reboots. Furthermore, if you intend to use a third-party SIP provider, you may need to configure the server to use a public IP address in order to avoid any network address translation (NAT) traversal problems. The appliance does not support NAT itself, and generally assumes all SIP proxies, registrars or peers will reside on the same local network segment. If you configure the appliance to connect to a SIP provider on some other remote network without taking any special precautions, the two devices will normally fail to communicate as the SIP provider is trying to reach the appliance on what it sees as its public IP, which is usually the IP of the company's firewall or edge router instead of the appliance. Expert tip: With careful planning and configuration it is possible to use SIP/NAT proxy tools, firewall DMZ features, or SIP application level gateways (ALGs) to handle the tracking and rewriting of SIP packets and allow HylaFAX to connect to a remote SIP provider from behind a NAT on a private LAN, but this should only be attempted after first testing the connection to this provider with the appliance on a globally-routable, public IP address. To configure a static IP address, select the Configure Network option from the Advanced Options menu. Select Edit Devices and press ENTER . Select eth0 or whatever the name of your adapter is and press ENTER. Deselect Use DHCP and then enter the desired Static IP address , Netmask , and Default Gateway IP (not the SIP gateway) into the respective fields. Select OK and press ENTER , and then select SAVE and press ENTER to return to the Configure Network menu. Next, you must setup DNS by selecting Edit DNS configuration and pressing ENTER. Enter the IP address of the Primary and Secondary(optional) DNS servers in the respective fields. Then select OK and press ENTER . To save and apply your changes, select Save & Quit and press ENTER .","title":"Configure Networking"},{"location":"quickstart/configuring-mail/","text":"Configuring Mail \u00b6 In the Configuring Mail area of the Advanced Options section, you can setup Email to FAX support, configure the appliance to route all outbound emails through a specific mail server, and setup email aliases for root and FaxMaster . In order to configure Email to FAX support, you must enter the domain name that you intend to use into the Fax Domain field. In order to send faxes by email, the recipient must be addressed in FAXNUMBER@fax.example.comformat where FAXNUMBER is the actual fax number. Keep in mind that your mail server must be able to lookup the Fax Domain in your network's DNS in order to deliver emails to the HylaFAX Enterprise Appliance and that the Fax Domain must not be identical to the appliance\u2019s Hostname. Some networks require all email to be handled by a specific mail server (ie: MS Exchange). The Smart Host setting allows you to configure that. Simply enter the hostname (or IP address) of your mail server into the Smart Host field. The root user is the system administrator while FaxMaster is used solely to receive periodic emails from HylaFAX regarding fax usage. In order to re-route all email sent to those users, enter the desired email address in their respective fields. Finally, to apply your changes, select the Save button and press ENTER .","title":"Configuring Mail"},{"location":"quickstart/configuring-mail/#configuring-mail","text":"In the Configuring Mail area of the Advanced Options section, you can setup Email to FAX support, configure the appliance to route all outbound emails through a specific mail server, and setup email aliases for root and FaxMaster . In order to configure Email to FAX support, you must enter the domain name that you intend to use into the Fax Domain field. In order to send faxes by email, the recipient must be addressed in FAXNUMBER@fax.example.comformat where FAXNUMBER is the actual fax number. Keep in mind that your mail server must be able to lookup the Fax Domain in your network's DNS in order to deliver emails to the HylaFAX Enterprise Appliance and that the Fax Domain must not be identical to the appliance\u2019s Hostname. Some networks require all email to be handled by a specific mail server (ie: MS Exchange). The Smart Host setting allows you to configure that. Simply enter the hostname (or IP address) of your mail server into the Smart Host field. The root user is the system administrator while FaxMaster is used solely to receive periodic emails from HylaFAX regarding fax usage. In order to re-route all email sent to those users, enter the desired email address in their respective fields. Finally, to apply your changes, select the Save button and press ENTER .","title":"Configuring Mail"},{"location":"quickstart/configuring-telco-connections/","text":"Configuring Telco Connections \u00b6 In the Configure Telco Connections area of the Advanced Options section, you can configure HylaFAX Enterprise to use your SIP/T.38 gateway, your Brooktrout TR1034, or to allow you to manually configure your devices. If you\u2019re evaluating HylaFAX Enterprise, leave the default number of boston devices as 2 . Otherwise, enter the total number of channels you have purchased licenses for. Next, select the Type of connection you\u2019d like to configure using the UP and DOWN arrows and then select Next to continue. The currently supported types include: Manual (for manual configuration), SIP, H.323, T1 ISDN PRI, T1 Robbed bit, and E1 ISDN PRI. For a SIP configuration, enter your SIP gateway\u2019s hostname (or IP address) in the Gateway field. If your gateway requires a SIP From URI, username, and/or password, enter the data in the SIP From, Username, and Password fields. If your gateway requires SIP registration, select Do SIP Registration by pressing the SPACEBAR. Finally, to apply your changes, select the Save button and press ENTER.","title":"Configuring Telco Connections"},{"location":"quickstart/configuring-telco-connections/#configuring-telco-connections","text":"In the Configure Telco Connections area of the Advanced Options section, you can configure HylaFAX Enterprise to use your SIP/T.38 gateway, your Brooktrout TR1034, or to allow you to manually configure your devices. If you\u2019re evaluating HylaFAX Enterprise, leave the default number of boston devices as 2 . Otherwise, enter the total number of channels you have purchased licenses for. Next, select the Type of connection you\u2019d like to configure using the UP and DOWN arrows and then select Next to continue. The currently supported types include: Manual (for manual configuration), SIP, H.323, T1 ISDN PRI, T1 Robbed bit, and E1 ISDN PRI. For a SIP configuration, enter your SIP gateway\u2019s hostname (or IP address) in the Gateway field. If your gateway requires a SIP From URI, username, and/or password, enter the data in the SIP From, Username, and Password fields. If your gateway requires SIP registration, select Do SIP Registration by pressing the SPACEBAR. Finally, to apply your changes, select the Save button and press ENTER.","title":"Configuring Telco Connections"},{"location":"quickstart/enabling-iFAX-support-access/","text":"Enabling iFAX Support Access \u00b6 Should you require assistance configuring your HylaFAX Enterprise Appliance, we will need to start a remote connection to your server in order to help. Before initiating the connection, please contact us at support@ifax.com for a Support Tunnel ID . Once you receive the Support Tunnel ID, you must access the HylaFAX Enterprise Appliance console and select Advanced Options -> Enable iFAX support access. Enter the ID supplied to you in the Support Tunnel ID field, then select the Enable button and press ENTER . This creates a secure connection to our servers where we will be able to access your HylaFAX Enterprise server remotely and provide assistance.","title":"Enabling iFAX Support Access"},{"location":"quickstart/enabling-iFAX-support-access/#enabling-ifax-support-access","text":"Should you require assistance configuring your HylaFAX Enterprise Appliance, we will need to start a remote connection to your server in order to help. Before initiating the connection, please contact us at support@ifax.com for a Support Tunnel ID . Once you receive the Support Tunnel ID, you must access the HylaFAX Enterprise Appliance console and select Advanced Options -> Enable iFAX support access. Enter the ID supplied to you in the Support Tunnel ID field, then select the Enable button and press ENTER . This creates a secure connection to our servers where we will be able to access your HylaFAX Enterprise server remotely and provide assistance.","title":"Enabling iFAX Support Access"},{"location":"quickstart/installing-the-iso/","text":"Installing the iso \u00b6 ****THIS WILL ERASE ALL DATA ON YOUR HARD DRIVE**** Power on your server (or virtual machine) and press ENTER at the installation prompt. Select your language Click on Installation Destination and then click Done to keep automatic partitioning Then click the Begin Installation button. Note: During the installation procedure, you must choose a password for the \u2018root\u2019 administrative UNIX user. This is not the web interface password.","title":"Installing the iso"},{"location":"quickstart/installing-the-iso/#installing-the-iso","text":"****THIS WILL ERASE ALL DATA ON YOUR HARD DRIVE**** Power on your server (or virtual machine) and press ENTER at the installation prompt. Select your language Click on Installation Destination and then click Done to keep automatic partitioning Then click the Begin Installation button. Note: During the installation procedure, you must choose a password for the \u2018root\u2019 administrative UNIX user. This is not the web interface password.","title":"Installing the iso"},{"location":"quickstart/notes/","text":"Notes: \u00b6 To access the Linux terminal, while connected to the HylaFAX Enterprise Application Console, press ALT-F1. The login is root and the password is the one you chose during the Appliance install. Additional terminals are accessible by pressing Alt-F2, Alt-F3, Alt-F4, Alt-F5, and Alt-F6. To return to the Appliance, press Alt-F8. If you don't have physical access to the server's console, you can attach to the Appliance Console by running \"attach-console\" over SSH.","title":"Notes"},{"location":"quickstart/notes/#notes","text":"To access the Linux terminal, while connected to the HylaFAX Enterprise Application Console, press ALT-F1. The login is root and the password is the one you chose during the Appliance install. Additional terminals are accessible by pressing Alt-F2, Alt-F3, Alt-F4, Alt-F5, and Alt-F6. To return to the Appliance, press Alt-F8. If you don't have physical access to the server's console, you can attach to the Appliance Console by running \"attach-console\" over SSH.","title":"Notes:"},{"location":"quickstart/web-interface-DID-routes/","text":"Web Interface DID Routes: \u00b6 By default, there are three DID groups configured. They are 1234 , 1321 , and 4321 . If a fax is sent to a non-existent DID group, then it will be stored in the \u201cCatch-All\u201d group. The admin account has access to view all faxes received in every DID group including the \u201cCatch-All\u201d group. The tech account only has access to view the faxes received on the 1321 and 4321 DID groups. The user account only has access to the 1234 DID group. Therefore, if you send a fax to 4321 , the users admin and tech will see the fax in the Inbox while user will not. If you send a fax to 2175 , only admin will be able to view the fax because it will be stored in the \u201cCatch-All\u201d group. You can create new DID groups and adjust user permissions in the Admin Settings area.","title":"Web Interface DID Routes"},{"location":"quickstart/web-interface-DID-routes/#web-interface-did-routes","text":"By default, there are three DID groups configured. They are 1234 , 1321 , and 4321 . If a fax is sent to a non-existent DID group, then it will be stored in the \u201cCatch-All\u201d group. The admin account has access to view all faxes received in every DID group including the \u201cCatch-All\u201d group. The tech account only has access to view the faxes received on the 1321 and 4321 DID groups. The user account only has access to the 1234 DID group. Therefore, if you send a fax to 4321 , the users admin and tech will see the fax in the Inbox while user will not. If you send a fax to 2175 , only admin will be able to view the fax because it will be stored in the \u201cCatch-All\u201d group. You can create new DID groups and adjust user permissions in the Admin Settings area.","title":"Web Interface DID Routes:"},{"location":"quickstart/web-interface-admin-basics/","text":"Web Interface Admin basics: \u00b6 Three accounts are preconfigured in the Web Interface. They are admin , tech , and user , and they all share the same default password of password .The \u2018admin\u2019 is an administrator while the tech and user accounts are both normal users. There is a third account type called Super user that is authorized to view all faxes sent and received on the server just like the administrator. However, a super user cannot login to the Admin Settings area (shown below).","title":"Web Interface Admin Basics"},{"location":"quickstart/web-interface-admin-basics/#web-interface-admin-basics","text":"Three accounts are preconfigured in the Web Interface. They are admin , tech , and user , and they all share the same default password of password .The \u2018admin\u2019 is an administrator while the tech and user accounts are both normal users. There is a third account type called Super user that is authorized to view all faxes sent and received on the server just like the administrator. However, a super user cannot login to the Admin Settings area (shown below).","title":"Web Interface Admin basics:"},{"location":"quickstart/web-interface-start-up/","text":"Web Interface Start Up \u00b6 You can connect to the HylaFAX Enterprise Web Interface with the following credentials: username password admin password Afterwards, you will be prompted to change the password for admin. The appliance is initially configured with two virtual fax devices operating in loop-back mode. Click on Send Fax and send a fax to any fax number, and it should be received and routed to the Inbox. NOTE:If you send a fax to 1-215-825-8792 , the first page of your fax will be faxed back to the number used in your Caller ID. Need test faxes? Click Here","title":"Web Interface Startup"},{"location":"quickstart/web-interface-start-up/#web-interface-start-up","text":"You can connect to the HylaFAX Enterprise Web Interface with the following credentials: username password admin password Afterwards, you will be prompted to change the password for admin. The appliance is initially configured with two virtual fax devices operating in loop-back mode. Click on Send Fax and send a fax to any fax number, and it should be received and routed to the Inbox. NOTE:If you send a fax to 1-215-825-8792 , the first page of your fax will be faxed back to the number used in your Caller ID. Need test faxes? Click Here","title":"Web Interface Start Up"}]}